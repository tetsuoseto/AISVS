# C7 모델 행동, 출력 제어 및 안전 보증

## 제어 목표

이 제어 범주는 모델 출력이 기술적으로 제한되고 검증되며 모니터링되어, 안전하지 않거나 잘못 형성되었거나 고위험 응답이 사용자나 하위 시스템에 도달하지 않도록 보장합니다.

---

## C7.1 출력 형식 강제 적용

모델이 출력하는 데이터가 인젝션 방지에 도움이 되도록 하십시오.

|   #   | 설명                                                                                      | 레벨  | 역할  |
| :---: | --------------------------------------------------------------------------------------- | :-: | :-: |
| 7.1.1 | 애플리케이션이 모든 모델 출력물을 엄격한 스키마(예: JSON Schema)를 기준으로 검증하며, 일치하지 않는 출력물을 모두 거부하는지 확인하십시오.    |  1  | D/V |
| 7.1.2 | 시스템이 버퍼 오버플로우를 방지하거나 의도하지 않은 명령 실행을 막기 위해 "중지 시퀀스" 또는 토큰 제한을 사용하여 생성을 엄격히 중단하는지 확인하십시오. |  1  | D/V |
| 7.1.3 | 모델 출력값을 처리하는 구성 요소가 이를 신뢰할 수 없는 입력으로 처리하는지 확인하십시오(예: 매개변수화된 쿼리 또는 안전한 역직렬화를 사용).        |  2  | D/V |
| 7.1.4 | 출력이 잘못된 형식으로 거부될 때 시스템이 특정 오류 유형을 기록하는지 확인하십시오.                                         |  3  |  V  |

---

## C7.2 환각 감지 및 완화

모델이 확신이 없거나 거짓말을 할 때 이를 감지하고 해당 정보가 사용자에게 전달되는 것을 차단합니다.

|   #   | 설명                                                                          | 레벨  | 역할  |
| :---: | --------------------------------------------------------------------------- | :-: | :-: |
| 7.2.1 | 시스템이 생성된 답변에 대해 수치적 신뢰도 점수(예: 로그 확률 사용)를 계산하는지 확인하십시오.                      |  1  | D/V |
| 7.2.2 | 응답의 신뢰도 점수가 정의된 임계값 아래로 떨어질 경우 애플리케이션이 자동으로 답변을 차단하거나 대체 메시지로 전환하는지 확인하십시오. |  1  | D/V |
| 7.2.3 | 환각 현상 이벤트(낮은 신뢰도의 응답)가 분석을 위해 입력/출력 메타데이터와 함께 기록되는지 확인하십시오.                 |  2  | D/V |

---

## C7.3 출력 안전 및 개인정보 보호 필터링

사용자에게 표시되기 전에 부적절한 콘텐츠를 감지하고 제거하는 기술적 통제 장치.

|   #   | 설명                                                                       | 레벨  | 역할  |
| :---: | ------------------------------------------------------------------------ | :-: | :-: |
| 7.3.1 | 자동화된 분류기가 모든 응답을 검사하여 증오, 괴롭힘 또는 성폭력 범주에 해당하는 콘텐츠를 차단하는지 확인하세요.          |  1  | D/V |
| 7.3.2 | 시스템이 각 응답에서 신용카드나 이메일 같은 개인 식별 정보(PII)를 모두 검사하고 표시 전에 자동으로 삭제하는지 확인하십시오. |  1  | D/V |
| 7.3.3 | 시스템 내에서 "기밀"로 분류된 데이터가 차단되거나 편집된 상태로 유지되는지 확인하십시오.                       |  2  |  D  |
| 7.3.4 | 시스템이 모델이 고위험 콘텐츠를 생성할 경우 인간의 승인 단계 또는 재인증을 요구하는지 확인하십시오.                 |  3  | D/V |
| 7.3.5 | 안전 필터가 사용자의 역할이나 위치에 따라 다르게 구성될 수 있는지 확인하십시오(예: 미성년자에 대해 더 엄격한 필터).      |  3  | D/V |

---

## C7.4 출력 및 동작 제한

모델이 너무 많거나 너무 빠르게 작업하거나 접근해서는 안 되는 것에 접근하지 못하도록 방지합니다.

|   #   | 설명                                                                            | 레벨  | 역할  |
| :---: | ----------------------------------------------------------------------------- | :-: | :-: |
| 7.4.1 | 비용 급증 및 서비스 거부를 방지하기 위해 시스템이 사용자별 요청 및 토큰에 대해 엄격한 한도를 적용하는지 확인하십시오.           |  1  |  D  |
| 7.4.2 | 모델이 명시적인 사용자 확인 없이 고위험 행동(예: 파일 작성, 이메일 발송, 코드 실행)을 수행할 수 없도록 확인하십시오.         |  1  | D/V |
| 7.4.3 | 에이전트 프레임워크가 재귀 호출의 최대 깊이, 위임 한도, 그리고 허용된 외부 도구 목록을 명시적으로 구성하고 이를 강제하는지 확인합니다. |  2  |  D  |

---

## C7.5 설명 가능성 및 투명성

사용자에게 결정이 내려진 이유를 명확히 알리십시오.

|   #   | 설명                                                    | 레벨  | 역할  |
| :---: | ----------------------------------------------------- | :-: | :-: |
| 7.5.1 | UI가 중요한 결정에 대해 사용자에게 신뢰 점수 또는 "추론 요약"을 표시하는지 확인하십시오.  |  2  | D/V |
| 7.5.2 | 사용자에게 제공되는 설명이 시스템 프롬프트나 백엔드 데이터를 제거하여 정제되었는지 확인하십시오. |  2  | D/V |
| 7.5.3 | 모델의 결정에 대한 기술적 증거(예: 어텐션 맵 또는 로그 확률)가 기록되었는지 확인하세요.   |  3  |  D  |

---

## C7.6 모니터링 통합

애플리케이션이 보안 팀이 감시할 올바른 신호를 전송하도록 하세요.

|   #   | 설명                                                                | 레벨  | 역할  |
| :---: | ----------------------------------------------------------------- | :-: | :-: |
| 7.6.1 | 시스템이 안전 위반에 대한 실시간 메트릭(예: "환각 감지됨", "PII 차단됨")을 로그로 기록하는지 확인하십시오. |  1  |  D  |
| 7.6.2 | 안전 위반 비율이 특정 시간 창 내에서 정의된 임계값을 초과할 경우 시스템이 경고를 발생시키는지 확인하십시오.     |  1  |  V  |
| 7.6.3 | 로그에 잠재적 남용 조사를 위해 필요한 특정 모델 버전 및 기타 세부 정보가 포함되어 있는지 확인하십시오.       |  2  |  V  |

---

## 7.7 생성 미디어 보호장치

불법 또는 가짜 미디어의 생성을 방지하십시오.

|   #   | 설명                                                                       | 레벨  | 역할  |
| :---: | ------------------------------------------------------------------------ | :-: | :-: |
| 7.7.1 | 시스템이 실제 인물을 검증된 동의 없이 묘사하는 미디어(이미지/오디오)를 생성하지 않도록 거부하는지 확인합니다.           |  1  | D/V |
| 7.7.2 | 모델이 처리하기 전에 입력 필터가 명시적이거나 딥페이크 콘텐츠를 요청하는 프롬프트를 차단하는지 확인하세요.              |  2  | D/V |
| 7.7.3 | 시스템이 생성된 콘텐츠를 공개하기 전에 저작권 침해 여부를 검사하는지 확인하십시오.                           |  2  |  V  |
| 7.7.4 | 모든 생성된 미디어에 인공지능이 생성했음을 증명할 수 있는 보이지 않는 워터마크 또는 암호화 서명이 포함되어 있는지 확인하십시오. |  3  | D/V |
| 7.7.5 | 필터 우회 시도가 보안 이벤트로 감지되고 기록되는지 확인하십시오.                                     |  3  |  V  |

## 참고 문헌

* [OWASP Top 10 for LLMs: LLM07: Insecure Output Handling](https://owasp.org/www-project-top-10-for-large-language-model-applications/#llm07-insecure-output-handling)

