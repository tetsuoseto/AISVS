# رفتار مدل C7، کنترل خروجی و تضمین ایمنی

## هدف کنترل

خروجی‌های مدل باید ساختاریافته، قابل اطمینان، ایمن، قابل توضیح و به‌صورت مداوم در تولید مورد نظارت قرار گیرند. این کار باعث کاهش توهمات، نشت‌های حریم خصوصی، محتوای مضر و اقدامات خارج از کنترل می‌شود و در عین حال اعتماد کاربران و تطابق با مقررات را افزایش می‌دهد.

---

## C7.1 اجبار قالب خروجی

طرح‌های سخت‌گیرانه، رمزگشایی محدودشده و اعتبارسنجی‌های پس‌زمینه، از انتشار محتوای نادرست یا مخرب جلوگیری می‌کنند.

|   #   | توضیحات                                                                                                                                                                                                                        | سطح | نقش |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :-: | :-: |
| 7.1.1 | تأیید کنید که اسکیمای پاسخ (مانند JSON Schema) در پرامپت سیستم ارائه شده و هر خروجی به‌صورت خودکار اعتبارسنجی می‌شود؛ خروجی‌هایی که با اسکیمای تعریف‌شده مطابقت نداشته باشند باعث فعال‌شدن فرایند تعمیر یا رد درخواست می‌شوند. |  1  | D/V |
| 7.1.2 | اطمینان حاصل کنید که رمزگشایی محدود شده (توکن‌های توقف، عبارات منظم، حداکثر تعداد توکن‌ها) فعال است تا از سرریز یا کانال‌های جانبی تزریق پرامپت جلوگیری شود.                                                                   |  1  | D/V |
| 7.1.3 | اطمینان حاصل کنید که اجزای پایین‌دستی خروجی‌ها را به عنوان نامطمئن در نظر می‌گیرند و آن‌ها را با استفاده از طرح‌های ساختاری یا د-سریالایزرهای امن در برابر تزریق اعتبارسنجی می‌کنند.                                           |  2  | D/V |
| 7.1.4 | اطمینان حاصل کنید که رویدادهای خروجی نادرست ثبت، نرخ محدود شده و به سامانه پایش منتقل می‌شوند.                                                                                                                                 |  3  |  V  |

---

## C7.2 تشخیص و کاهش هالوسی‌سازی

برآورد عدم قطعیت و راهبردهای پشتیبان پاسخ‌های ساختگی را محدود می‌کنند.

|   #   | توضیحات                                                                                                                                                               | سطح | نقش |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.2.1 | تأیید کنید که احتمال‌های لگاریتمی در سطح توکن، خودسازگاری مجموعه‌ای، یا آشکارسازهای هذیان تنظیم‌شده به‌دقت، یک نمره اطمینان به هر پاسخ اختصاص می‌دهند.                |  1  | D/V |
| 7.2.2 | تأیید کنید که پاسخ‌هایی با سطح اعتماد کمتر از آستانه قابل تنظیم، فرایندهای پشتیبان (مانند تولید تقویت‌شده با بازیابی، مدل ثانویه، یا بازبینی انسانی) را فعال می‌کنند. |  1  | D/V |
| 7.2.3 | اطمینان حاصل کنید که حوادث توهم با متاداده علت ریشه‌ای برچسب‌گذاری شده و به خط لوله‌های بررسی پس از وقوع و تنظیم دقیق منتقل می‌شوند.                                  |  2  | D/V |
| 7.2.4 | اطمینان حاصل کنید که آستانه‌ها و آشکارسازها پس از به‌روزرسانی‌های عمده مدل یا پایگاه دانش دوباره کالیبره شده‌اند.                                                     |  3  | D/V |
| 7.2.5 | تأیید کنید که نمودارهای داشبورد نرخ‌های هذیان را پیگیری می‌کنند.                                                                                                      |  3  |  V  |

---

## C7.3 فیلترینگ ایمنی و حریم خصوصی خروجی

فیلترهای سیاست و پوشش تیم قرمز از کاربران و داده‌های محرمانه حفاظت می‌کنند.

|   #   | توضیحات                                                                                                                                                                                         | سطح | نقش |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.3.1 | تأیید کنید که طبقه‌بندهای قبل و بعد از تولید محتوا، محتوای نفرت‌آمیز، آزاردهنده، خودآسیب‌رسان، افراطی و محتوای جنسی صریح که با سیاست مطابقت دارد را مسدود می‌کنند.                              |  1  | D/V |
| 7.3.2 | اطمینان حاصل کنید که شناسایی اطلاعات شخصی قابل شناسایی (PII) و اطلاعات کارت پرداختی (PCI) و پاک‌سازی خودکار در هر پاسخ اجرا می‌شود؛ رعایت نکردن این موضوع منجر به بروز حادثه حریم خصوصی می‌شود. |  1  | D/V |
| 7.3.3 | اطمینان حاصل کنید که برچسب‌های محرمانگی (مثلاً اسرار تجاری) در سراسر مدالیته‌ها منتقل می‌شوند تا از نشت اطلاعات در متن، تصاویر یا کد جلوگیری شود.                                               |  2  |  D  |
| 7.3.4 | اطمینان حاصل کنید که تلاش‌های عبور از فیلتر یا دسته‌بندی‌های با ریسک بالا نیاز به تایید ثانویه یا احراز هویت مجدد کاربر دارند.                                                                  |  3  | D/V |
| 7.3.5 | تأیید کنید که آستانه‌های فیلترینگ مطابق با حوزه‌های قضایی قانونی و زمینه سنی/نقشی کاربر باشد.                                                                                                   |  3  | D/V |

---

## C7.4 محدود کردن خروجی و اقدام

محدودیت‌های نرخ و دروازه‌های تأیید از سوءاستفاده و خودمختاری بیش از حد جلوگیری می‌کنند.

|   #   | توضیحات                                                                                                                                                        | سطح | نقش |
| :---: | -------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.4.1 | تأیید کنید که سهمیه‌های هر کاربر و هر کلید API درخواست‌ها، توکن‌ها و هزینه‌ها را با استفاده از بازگشت نمایی در مواجهه با خطاهای 429 محدود می‌کنند.             |  1  |  D  |
| 7.4.2 | اطمینان حاصل کنید که اقدامات دارای امتیاز ویژه (نوشتن فایل، اجرای کد، فراخوانی‌های شبکه) به تایید مبتنی بر سیاست یا دخالت انسانی نیاز دارند.                   |  1  | D/V |
| 7.4.3 | تأیید کنید که بررسی‌های سازگاری چندرسانه‌ای تضمین می‌کند تصاویر، کد و متنی که برای همان درخواست تولید شده‌اند، نمی‌توانند برای قاچاق محتوای مخرب استفاده شوند. |  2  | D/V |
| 7.4.4 | تأیید کنید که عمق نمایندگی عامل، محدودیت‌های بازگشتی، و فهرست ابزارهای مجاز به طور صریح پیکربندی شده‌اند.                                                      |  2  |  D  |
| 7.4.5 | تأیید کنید که نقض محدودیت‌ها باعث صدور رویدادهای امنیتی ساختاریافته برای جذب در سیستم SIEM شود.                                                                |  3  |  V  |

---

## قابل توضیح بودن خروجی C7.5

سیگنال‌های شفاف اعتماد کاربر و رفع اشکال داخلی را افزایش می‌دهند.

|   #   | توضیحات                                                                                                                             | سطح | نقش |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.5.1 | اطمینان حاصل کنید که نمرات اطمینان قابل مشاهده برای کاربر یا خلاصه‌های مختصر دلایل زمانی که ارزیابی ریسک مناسب می‌داند، ارائه شوند. |  2  | D/V |
| 7.5.2 | اطمینان حاصل کنید که توضیحات تولید شده از فاش کردن فرامین حساس سیستم یا داده‌های اختصاصی جلوگیری می‌کنند.                           |  2  | D/V |
| 7.5.3 | اطمینان حاصل کنید که سیستم لاگ-احتمال‌های سطح توکن یا نقشه‌های توجه را ثبت می‌کند و آن‌ها را برای بازبینی مجاز ذخیره می‌نماید.      |  3  |  D  |
| 7.5.4 | اطمینان حاصل کنید که مصنوعات قابلیت توضیح‌دهی به همراه نسخه‌های مدل برای قابلیت حسابرسی کنترل نسخه شده‌اند.                         |  3  |  V  |

---

## C7.6 یکپارچه‌سازی نظارت

مشاهده‌پذیری در زمان واقعی حلقه بین توسعه و تولید را می‌بندد.

|   #   | توضیحات                                                                                                                                                  | سطح | نقش |
| :---: | -------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.6.1 | اطمینان حاصل کنید که متریک‌ها (تخلفات طرح، نرخ توهم‌زایی، سمی بودن، نشت داده‌های شخصی شناسایی شده، تأخیر، هزینه) به یک پلتفرم مرکزی نظارت ارسال می‌شوند. |  1  |  D  |
| 7.6.2 | اطمینان حاصل کنید که آستانه‌های هشدار برای هر معیار ایمنی تعریف شده‌اند، همراه با مسیرهای ارتقاء تماس در دسترس.                                          |  1  |  V  |
| 7.6.3 | اطمینان حاصل کنید که داشبوردها ناهنجاری‌های خروجی را با مدل/نسخه، علامت ویژگی، و تغییرات داده‌های بالادستی مرتبط می‌کنند.                                |  2  |  V  |
| 7.6.4 | تأیید کنید که داده‌های نظارتی در داخل یک جریان کاری مستند MLOps به بازآموزی، تنظیم دقیق یا به‌روزرسانی قوانین بازمی‌گردند.                               |  2  | D/V |
| 7.6.5 | اطمینان حاصل کنید که پایپ‌لاین‌های نظارتی تحت آزمایش نفوذ قرار گرفته و دارای کنترل دسترسی هستند تا از نشت لاگ‌های حساس جلوگیری شود.                      |  3  |  V  |

---

## 7.7 تدابیر حفاظتی رسانه‌های مولدی

اطمینان حاصل کنید که سیستم‌های هوش مصنوعی محتوای رسانه‌ای غیرقانونی، مضر یا غیرمجاز تولید نکنند با اعمال محدودیت‌های سیاستی، اعتبارسنجی خروجی و قابلیت ردیابی.

|   #   | توضیحات                                                                                                                                                                                          | سطح | نقش |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :-: | :-: |
| 7.7.1 | اطمینان حاصل کنید که دستورالعمل‌های سیستم و راهنمایی‌های کاربر به‌طور صریح تولید رسانه‌های دیپ‌فیک غیرقانونی، مضر یا بدون رضایت (مانند تصویر، ویدئو، صدا) را ممنوع می‌کنند.                      |  1  | D/V |
| 7.7.2 | تأیید کنید که درخواست‌ها برای تلاش در تولید تقلیدهای جعلی، تصاویر مستهجن عمیق یا رسانه‌هایی که افراد واقعی را بدون رضایت نشان می‌دهند، فیلتر می‌شوند.                                            |  2  | D/V |
| 7.7.3 | اطمینان حاصل کنید که سیستم از هش ادراکی، تشخیص نشانه آبی، یا اثر انگشت برای جلوگیری از تکثیر غیرمجاز محتوای دارای حق چاپ استفاده می‌کند.                                                         |  2  |  V  |
| 7.7.4 | تأیید کنید که تمام رسانه‌های تولید شده به صورت رمزنگاری‌شده امضا شده‌اند، دارای واترمارک هستند یا با متاداده‌های منبع قابل‌ردیابی و مقاوم در برابر دستکاری برای ردیابی‌های بعدی تعبیه شده‌اند.   |  3  | D/V |
| 7.7.5 | اطمینان حاصل کنید که تلاش‌های دور زدن (مانند ابهام‌سازی پیام، زبان محاوره‌ای، بیان خصمانه) شناسایی، ثبت و محدودیت نرخ برای آنها اعمال می‌شود؛ سوء استفاده مکرر به سیستم‌های نظارتی گزارش می‌شود. |  3  |  V  |

## مراجع

* [NIST AI Risk Management Framework](https://www.nist.gov/itl/ai-risk-management-framework)
* [ISO/IEC 42001:2023 – AI Management System](https://www.iso.org/obp/ui/en/)
* [OWASP Top-10 for Large Language Model Applications (2025)](https://owasp.org/www-project-top-10-for-large-language-model-applications/)
* [Improper Output Handling – OWASP LLM05:2025](https://genai.owasp.org/llmrisk/llm052025-improper-output-handling/)
* [Practical Techniques to Constrain LLM Output](https://mychen76.medium.com/practical-techniques-to-constraint-llm-output-in-json-format-e3e72396c670)
* [Dataiku – Structured Text Generation Guide](https://blog.dataiku.com/your-guide-to-structured-text-generation)
* [VL-Uncertainty: Detecting Hallucinations](https://arxiv.org/abs/2411.11919)
* [HaDeMiF: Hallucination Detection & Mitigation](https://openreview.net/forum?id=VwOYxPScxB)
* [Building Confidence in LLM Outputs](https://www.alkymi.io/data-science-room/building-confidence-in-llm-outputs)
* [Explainable AI & LLMs](https://duncsand.medium.com/explainable-ai-140912d31b3b)
* [LLM Red-Teaming Guide](https://www.confident-ai.com/blog/red-teaming-llms-a-step-by-step-guide)
* [Sensitive Information Disclosure in LLMs](https://virtualcyberlabs.com/llm-sensitive-information-disclosure/)
* [LangChain – Chat Model Rate Limiting](https://python.langchain.com/docs/how_to/chat_model_rate_limiting/)
* [OpenAI Rate-Limit & Exponential Back-off](https://hackernoon.com/openais-rate-limit-a-guide-to-exponential-backoff-for-llm-evaluation)
* [Arize AI – LLM Observability Platform](https://arize.com/)

