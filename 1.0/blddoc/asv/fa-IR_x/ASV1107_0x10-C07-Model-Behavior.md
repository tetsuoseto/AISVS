# رفتار مدل C7، کنترل خروجی و تضمین ایمنی

## هدف کنترل

خروجی‌های مدل باید ساختارمند، قابل اعتماد، ایمن، قابل توضیح و به‌طور مداوم در تولید زیر نظر گرفته شوند. انجام این کار موجب کاهش توهمات، نشت حریم خصوصی، محتوای مضر و رفتارهای خارج از کنترل می‌شود، در حالی که اعتماد کاربر و تطابق با مقررات را افزایش می‌دهد.

---

## C7.1 اعمال فرمت خروجی

طرح‌های دقیق، رمزگشایی محدود شده و اعتبارسنجی پایین‌دستی از انتشار محتوای نادرست یا مخرب جلوگیری می‌کنند.

|   #   | توضیحات                                                                                                                                                                               | سطح | نقش |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.1.1 | تأیید کنید که اسکیمای پاسخ (مثلاً JSON Schema) در پرامپت سیستم ارائه شده و هر خروجی به طور خودکار اعتبارسنجی می‌شود؛ خروجی‌های غیرمطابق باعث فعال شدن تعمیر یا رد شدن می‌شوند.        |  1  | D/V |
| 7.1.2 | اطمینان حاصل کنید که رمزگشایی محدود شده (توکن‌های توقف، عبارات منظم، حداکثر توکن‌ها) فعال است تا از سرریز یا کانال‌های جانبی تزریق پرامپت جلوگیری شود.                                |  1  | D/V |
| 7.1.3 | اطمینان حاصل کنید که اجزای پایین‌دستی خروجی‌ها را به عنوان داده‌های غیرقابل اعتماد در نظر می‌گیرند و آنها را بر اساس طرح‌ها یا د-سریالایزرهای ایمن در برابر تزریق اعتبارسنجی می‌کنند. |  2  | D/V |
| 7.1.4 | اطمینان حاصل کنید که رویدادهای خروجی نامناسب ثبت، محدود به نرخ شده و در سامانه نظارت نمایش داده می‌شوند.                                                                              |  3  |  V  |

---

## C7.2 تشخیص و کاهش توهم

تخمین عدم قطعیت و استراتژی‌های جایگزین از پاسخ‌های ساختگی جلوگیری می‌کنند.

|   #   | توضیحات                                                                                                                                                         | سطح | نقش |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.2.1 | بررسی کنید که احتمال‌های لگاریتمی در سطح توکن، انسجام خودگروهی ترکیبی، یا آشکارسازهای هذیان اصلاح‌شده، به هر پاسخ یک نمره اعتماد اختصاص دهند.                   |  1  | D/V |
| 7.2.2 | تأیید کنید که پاسخ‌هایی با اطمینان کمتر از آستانه قابل تنظیم، فرآیندهای جایگزین را فعال کنند (مثلاً تولید تقویت‌شده با بازیابی، مدل ثانویه، یا بازبینی انسانی). |  1  | D/V |
| 7.2.3 | اطمینان حاصل کنید که حوادث هذیان با متادیتای علت ریشه‌ای برچسب‌گذاری شده و به خطوط لوله پس از مرگ و ریزتنظیم ارسال می‌شوند.                                     |  2  | D/V |
| 7.2.4 | اطمینان حاصل کنید که آستانه‌ها و آشکارسازها پس از به‌روزرسانی‌های بزرگ مدل یا پایگاه دانش، مجدداً کالیبره شوند.                                                 |  3  | D/V |
| 7.2.5 | اطمینان حاصل کنید که تجسم‌های داشبورد نرخ‌های توهم را پیگیری می‌کنند.                                                                                           |  3  |  V  |

---

## C7.3 فیلتر کردن ایمنی و حفظ حریم خصوصی خروجی

فیلترهای سیاستی و پوشش تیم قرمز از کاربران و داده‌های محرمانه محافظت می‌کنند.

|   #   | توضیحات                                                                                                                                                        | سطح | نقش |
| :---: | -------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.3.1 | تأیید کنید که طبقه‌بندهای قبل و بعد از تولید، محتوای مرتبط با نفرت، آزار و اذیت، خودآسیب‌رسانی، افراطی‌گری و محتوای جنسی صریح مطابق با سیاست را مسدود می‌کنند. |  1  | D/V |
| 7.3.2 | تأیید کنید که تشخیص PII/PCI و حذف خودکار در هر پاسخ اجرا شود؛ تخلفات باعث بروز حادثه حفظ حریم خصوصی می‌شود.                                                    |  1  | D/V |
| 7.3.3 | تأیید کنید که برچسب‌های محرمانگی (مانند اسرار تجاری) در تمامی حالت‌ها منتقل می‌شوند تا از لو رفتن در متن، تصاویر یا کد جلوگیری شود.                            |  2  |  D  |
| 7.3.4 | تأیید کنید که تلاش‌های عبور از فیلتر یا طبقه‌بندی‌های پرخطر نیازمند تأیید ثانویه یا ورود مجدد کاربر باشند.                                                     |  3  | D/V |
| 7.3.5 | تأیید کنید که آستانه‌های فیلترینگ بازتاب‌دهنده حوزه‌های قضایی قانونی و زمینه سن/نقش کاربر باشند.                                                               |  3  | D/V |

---

## C7.4 محدود کردن خروجی و عمل

محدودیت‌های نرخ و دروازه‌های تأیید از سوءاستفاده و خودمختاری بیش از حد جلوگیری می‌کنند.

|   #   | توضیحات                                                                                                                                                                              | سطح | نقش |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :-: | :-: |
| 7.4.1 | تأیید کنید که سهمیه‌های مربوط به هر کاربر و هر کلید API درخواست‌ها، توکن‌ها و هزینه‌ها را با استفاده از روش بازگشت نمایی (exponential back-off) در مواجهه با خطای 429 محدود می‌کنند. |  1  |  D  |
| 7.4.2 | اطمینان حاصل کنید که اقدامات دارای امتیاز بالا (نوشتن فایل، اجرای کد، تماس‌های شبکه) نیاز به تصویب مبتنی بر سیاست یا دخالت انسانی دارند.                                             |  1  | D/V |
| 7.4.3 | اطمینان حاصل کنید که بررسی‌های تطابق میان‌مدلی تضمین می‌کنند تصاویر، کد و متنی که برای یک درخواست مشابه ایجاد شده‌اند، نمی‌توانند برای قاچاق محتوای مخرب استفاده شوند.               |  2  | D/V |
| 7.4.4 | تأیید کنید که عمق واگذاری نماینده، محدودیت‌های بازگشتی و فهرست ابزارهای مجاز به‌طور صریح پیکربندی شده باشند.                                                                         |  2  |  D  |
| 7.4.5 | اطمینان حاصل کنید که نقض محدودیت‌ها رویدادهای امنیتی ساختاریافته‌ای برای دریافت توسط سیستم‌های SIEM ارسال می‌کند.                                                                    |  3  |  V  |

---

## قابلیت توضیح‌پذیری خروجی C7.5

سیگنال‌های شفاف اعتماد کاربران و اشکال‌زدایی داخلی را بهبود می‌بخشند.

|   #   | توضیحات                                                                                                                                   | سطح | نقش |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.5.1 | اطمینان حاصل کنید که امتیازهای اعتماد مستقیم به کاربر یا خلاصه‌های مختصر استدلال زمانی که ارزیابی ریسک مناسب می‌داند، نمایش داده می‌شوند. |  2  | D/V |
| 7.5.2 | اطمینان حاصل کنید که توضیحات تولید شده از فاش کردن دستورات حساس سیستم یا داده‌های مالکیتی خودداری می‌کنند.                                |  2  | D/V |
| 7.5.3 | اطمینان حاصل کنید که سیستم احتمال‌های لگاریتمی سطح توکن یا نقشه‌های توجه را ضبط کرده و آنها را برای بازرسی مجاز ذخیره می‌کند.             |  3  |  D  |
| 7.5.4 | اطمینان حاصل کنید که آثار توضیح‌پذیری همراه با انتشار مدل‌ها تحت کنترل نسخه قرار دارند تا قابلیت حسابرسی داشته باشند.                     |  3  |  V  |

---

## C7.6 یکپارچه‌سازی پایش

قابلیت مشاهده در لحظه حلقه بین توسعه و تولید را می‌بندد.

|   #   | توضیحات                                                                                                                                                       | سطح | نقش |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.6.1 | تأیید کنید که معیارها (نقض‌های طرح‌واره، نرخ هذیان‌پردازی، سمی بودن، نشت اطلاعات شخصی شناسایی شده، تأخیر، هزینه) به یک پلتفرم مرکزی مانیتورینگ ارسال می‌شوند. |  1  |  D  |
| 7.6.2 | اطمینان حاصل کنید که آستانه‌های هشدار برای هر معیار ایمنی تعریف شده‌اند و مسیرهای تصعيد تماس در دسترس هستند.                                                  |  1  |  V  |
| 7.6.3 | اطمینان حاصل کنید که داشبوردها ناهنجاری‌های خروجی را با مدل/نسخه، پرچم ویژگی، و تغییرات داده‌های بالادستی مرتبط می‌کنند.                                      |  2  |  V  |
| 7.6.4 | اطمینان حاصل کنید که داده‌های نظارتی به فرآیندهای بازآموزی، تنظیم دقیق یا به‌روزرسانی قوانین در چارچوب مستند شده MLOps بازخورد می‌دهند.                       |  2  | D/V |
| 7.6.5 | اطمینان حاصل کنید که خطوط لوله نظارت شده تست نفوذ شده و تحت کنترل دسترسی قرار دارند تا از نشت لاگ‌های حساس جلوگیری شود.                                       |  3  |  V  |

---

## 7.7 تضمین‌های رسانه‌های مولد

اطمینان حاصل کنید که سیستم‌های هوش مصنوعی محتوای رسانه‌ای غیرقانونی، مضر یا غیرمجاز تولید نکنند از طریق اجرای محدودیت‌های سیاستی، اعتبارسنجی خروجی و قابلیت رهگیری.

|   #   | توضیحات                                                                                                                                                                                | سطح | نقش |
| :---: | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.7.1 | اطمینان حاصل کنید که دستورات سیستم و راهنمایی‌های کاربران به‌طور صریح تولید رسانه‌های دیپ‌فیک غیرقانونی، مضر یا بدون رضایت (مانند تصویر، ویدئو، صدا) را ممنوع می‌کنند.                 |  1  | D/V |
| 7.7.2 | تأیید کنید که درخواست‌ها برای تلاش‌های تولید تقلید هویت، تصاویر عمیق جنسی صریح، یا رسانه‌هایی که افراد واقعی را بدون رضایت نشان می‌دهند، فیلتر می‌شوند.                                |  2  | D/V |
| 7.7.3 | تأیید کنید که سیستم از هش ادراکی، شناسایی واترمارک یا اثر انگشت دیجیتال برای جلوگیری از تولید غیرمجاز محتوای دارای حق چاپ استفاده می‌کند.                                              |  2  |  V  |
| 7.7.4 | اطمینان حاصل کنید که تمامی رسانه‌های تولید شده به صورت رمزنگاری شده امضا شده، دارای واترمارک هستند یا با متادیتای منبع مقاوم در برابر دستکاری برای ردیابی‌های بعدی جاسازی شده‌اند.     |  3  | D/V |
| 7.7.5 | تأیید کنید که تلاش‌های عبور (مانند پیچیده‌سازی دستور، زبان عامیانه، عبارت‌بندی خصمانه) شناسایی، ثبت و محدودیت نرخ اعمال می‌شوند؛ سوءاستفاده مکرر به سیستم‌های نظارت گزارش داده می‌شود. |  3  |  V  |

## مراجع

* [NIST AI Risk Management Framework](https://www.nist.gov/itl/ai-risk-management-framework)
* [ISO/IEC 42001:2023 – AI Management System](https://www.iso.org/obp/ui/en/)
* [OWASP Top-10 for Large Language Model Applications (2025)](https://owasp.org/www-project-top-10-for-large-language-model-applications/)
* [Practical Techniques to Constrain LLM Output](https://mychen76.medium.com/practical-techniques-to-constraint-llm-output-in-json-format-e3e72396c670)
* [Dataiku – Structured Text Generation Guide](https://blog.dataiku.com/your-guide-to-structured-text-generation)
* [VL-Uncertainty: Detecting Hallucinations](https://arxiv.org/abs/2411.11919)
* [HaDeMiF: Hallucination Detection & Mitigation](https://openreview.net/forum?id=VwOYxPScxB)
* [Building Confidence in LLM Outputs](https://www.alkymi.io/data-science-room/building-confidence-in-llm-outputs)
* [Explainable AI & LLMs](https://duncsand.medium.com/explainable-ai-140912d31b3b)
* [Sensitive Information Disclosure in LLMs](https://virtualcyberlabs.com/llm-sensitive-information-disclosure/)
* [OpenAI Rate-Limit & Exponential Back-off](https://hackernoon.com/openais-rate-limit-a-guide-to-exponential-backoff-for-llm-evaluation)
* [Arize AI – LLM Observability Platform](https://arize.com/)

