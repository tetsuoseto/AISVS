# رفتار مدل C7، کنترل خروجی و تضمین ایمنی

## هدف کنترل

خروجی‌های مدل باید ساختاریافته، قابل‌اطمینان، ایمن، قابل‌توضیح و به‌طور مداوم در تولید پایش شوند. انجام این کار باعث کاهش توهم‌ها، نشت‌های حریم خصوصی، محتوای مضر و اقدامات کنترل‌نشده می‌شود، در حالی که اعتماد کاربران و تطابق با مقررات را افزایش می‌دهد.

---

## C7.1 اجرای فرمت خروجی

اسکیم‌های سخت‌گیرانه، رمزگشایی محدود شده و اعتبارسنجی مرحله بعدی مانع از انتشار محتوای نادرست یا مخرب می‌شوند.

|   #   | توضیحات                                                                                                                                                                                     | سطح | نقش |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.1.1 | بررسی کنید که اسکیماهای پاسخ (مانند JSON Schema) در فرمان سیستم ارائه شده باشند و هر خروجی به طور خودکار اعتبارسنجی شود؛ خروجی‌هایی که با آن مطابقت نداشته باشند موجب تعمیر یا رد شدن شوند. |  1  | D/V |
| 7.1.2 | تأیید کنید که رمزگشایی محدود شده (توکن‌های توقف، عبارات منظم، حداکثر توکن‌ها) فعال است تا از سرریز یا کانال‌های جانبی تزریق پراپمت جلوگیری شود.                                             |  1  | D/V |
| 7.1.3 | تأیید کنید که اجزای پایین‌دستی خروجی‌ها را به‌عنوان ناامن در نظر گرفته و آن‌ها را در برابر طرح‌واره‌ها یا د-سریالایزرهای ایمن در برابر تزریق اعتبارسنجی کنند.                               |  2  | D/V |
| 7.1.4 | اطمینان حاصل کنید که رویدادهای خروجی نامناسب ثبت، محدودسازی نرخ شده و به نظارت نمایش داده می‌شوند.                                                                                          |  3  |  V  |

---

## C7.2 تشخیص و کاهش هذیان

برآورد عدم قطعیت و استراتژی‌های پشتیبان پاسخ‌های ساختگی را مهار می‌کنند.

|   #   | توضیحات                                                                                                                                                                     | سطح | نقش |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.2.1 | تأیید کنید که احتمال‌های لگاریتمی در سطح توکن، انسجام خود گروهی ансамбلی، یا آشکارسازهای هذیان تنظیم‌شده به‌دقت، به هر پاسخ امتیاز اعتماد اختصاص می‌دهند.                   |  1  | D/V |
| 7.2.2 | اطمینان حاصل کنید که پاسخ‌هایی با اطمینان کمتر از آستانه قابل تنظیم، جریان‌های کاری جایگزین را فعال می‌کنند (مثلاً تولید افزوده به بازیابی، مدل ثانویه، یا بازبینی انسانی). |  1  | D/V |
| 7.2.3 | اطمینان حاصل کنید که حوادث هذیان با متادیتای علت ریشه‌ای برچسب‌گذاری شده و به خطوط لوله پسامرتیم و تنظیم دقیق داده می‌شوند.                                                 |  2  | D/V |
| 7.2.4 | اطمینان حاصل کنید که پس از به‌روزرسانی‌های عمده مدل یا پایگاه دانش، آستانه‌ها و آشکارسازها دوباره کالیبره شده‌اند.                                                          |  3  | D/V |
| 7.2.5 | تأیید کنید که تجسم‌های داشبورد میزان توهم‌سازی را ردیابی می‌کنند.                                                                                                           |  3  |  V  |

---

## فیلترینگ ایمنی و حفظ حریم خصوصی خروجی C7.3

فیلترهای سیاستی و پوشش تیم قرمز از کاربران و داده‌های محرمانه محافظت می‌کنند.

|   #   | توضیحات                                                                                                                                                                       | سطح | نقش |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.3.1 | اطمینان حاصل کنید که طبقه‌بندهای پیش و پس از تولید، محتوای نفرت‌انگیز، آزاردهنده، خودآسیب‌رسان، تندروانه و دارای محتوای جنسی صریح که با سیاست‌ها تطابق دارد را مسدود می‌کنند. |  1  | D/V |
| 7.3.2 | اطمینان حاصل کنید که شناسایی PII/PCI و پاک‌سازی خودکار در هر پاسخ اجرا می‌شود؛ تخلفات منجر به بروز حادثه حفظ حریم خصوصی می‌شود.                                               |  1  | D/V |
| 7.3.3 | اطمینان حاصل کنید که برچسب‌های محرمانگی (مانند اسرار تجاری) در تمام مدالیته‌ها منتقل می‌شوند تا از نشت اطلاعات در متن، تصاویر یا کد جلوگیری شود.                              |  2  |  D  |
| 7.3.4 | اطمینان حاصل کنید که تلاش‌های عبور از فیلتر یا دسته‌بندی‌های پرخطر نیازمند تایید ثانویه یا دوباره‌تصدیق کاربر هستند.                                                          |  3  | D/V |
| 7.3.5 | تأیید کنید که آستانه‌های فیلترسازی بازتاب‌دهنده حوزه‌های قضایی قانونی و زمینه سنی/نقشی کاربر باشند.                                                                           |  3  | D/V |

---

## C7.4 محدودسازی خروجی و عمل

محدودیت‌های نرخ و دروازه‌های تایید از سوءاستفاده و خودمختاری بیش از حد جلوگیری می‌کنند.

|   #   | توضیحات                                                                                                                                                                   | سطح | نقش |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.4.1 | تأیید کنید که سهمیه‌های هر کاربر و هر کلید API درخواست‌ها، توکن‌ها و هزینه‌ها را با توقف نمایی در صورت خطاهای 429 محدود می‌کنند.                                          |  1  |  D  |
| 7.4.2 | تأیید کنید که اقدامات پرامتیاز (نوشتن فایل، اجرای کد، تماس‌های شبکه) نیازمند تأیید مبتنی بر سیاست یا دخالت انسانی هستند.                                                  |  1  | D/V |
| 7.4.3 | اطمینان حاصل کنید که بررسی‌های تطابق بین‌مدالی تضمین می‌کنند که تصاویر، کد و متنی که برای یک درخواست مشابه تولید می‌شوند، نمی‌توانند برای قاچاق محتوای مخرب استفاده شوند. |  2  | D/V |
| 7.4.4 | اطمینان حاصل کنید که عمق واگذاری نماینده، محدودیت‌های بازگشتی و فهرست ابزارهای مجاز به طور صریح تنظیم شده‌اند.                                                            |  2  |  D  |
| 7.4.5 | اطمینان حاصل کنید که نقض محدودیت‌ها رویدادهای امنیتی ساختاریافته‌ای را برای ورود به SIEM ارسال می‌کند.                                                                    |  3  |  V  |

---

## قابل توضیح بودن خروجی C7.5

سیگنال‌های شفاف باعث افزایش اعتماد کاربران و تسهیل رفع اشکال داخلی می‌شوند.

|   #   | توضیحات                                                                                                                                             | سطح | نقش |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.5.1 | اطمینان حاصل کنید که امتیازات اطمینان نمایش داده شده به کاربر یا خلاصه‌های کوتاه استدلال زمانی که ارزیابی ریسک مناسب تشخیص داده شود، ارائه می‌شوند. |  2  | D/V |
| 7.5.2 | اطمینان حاصل کنید که توضیحات تولید شده از فاش کردن دستورات حساس سیستم یا داده‌های اختصاصی خودداری می‌کنند.                                          |  2  | D/V |
| 7.5.3 | اطمینان حاصل کنید که سیستم احتمال‌های لاگ در سطح توکن یا نقشه‌های توجه را ضبط می‌کند و آن‌ها را برای بازرسی مجاز ذخیره می‌کند.                      |  3  |  D  |
| 7.5.4 | اطمینان حاصل کنید که مصنوعات توضیح‌پذیری همزمان با انتشار مدل‌ها تحت کنترل نسخه قرار دارند تا قابلیت حسابرسی فراهم شود.                             |  3  |  V  |

---

## C7.6 یکپارچه‌سازی نظارت

قابلیت مشاهده در زمان واقعی حلقه بین توسعه و تولید را می‌بندد.

|   #   | توضیحات                                                                                                                                                | سطح | نقش |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------ | :-: | :-: |
| 7.6.1 | اطمینان حاصل کنید که معیارها (نقض‌های ساختار داده، نرخ توهم، سمی بودن، نشت اطلاعات شناسایی شخصی، تأخیر، هزینه) به یک پلتفرم مرکزی نظارت ارسال می‌شوند. |  1  |  D  |
| 7.6.2 | اطمینان حاصل کنید که آستانه‌های هشدار برای هر معیار ایمنی تعریف شده باشد و مسیرهای تصعید برای تماس اضطراری مشخص شده باشند.                             |  1  |  V  |
| 7.6.3 | تأیید کنید که داشبوردها ناهنجاری‌های خروجی را با مدل/نسخه، علامت ویژگی و تغییرات داده‌های ورودی مرتبط می‌سازند.                                        |  2  |  V  |
| 7.6.4 | تأیید کنید که داده‌های نظارتی به بازآموزی، تنظیم دقیق یا به‌روزرسانی قوانین در یک گردش کار مستند MLOps بازخورد داده می‌شوند.                           |  2  | D/V |
| 7.6.5 | تأیید کنید که خطوط لوله نظارتی از نظر نفوذ تست شده و کنترل دسترسی دارند تا از نشت لاگ‌های حساس جلوگیری شود.                                            |  3  |  V  |

---

## 7.7 تدابیر حفاظتی رسانه‌های مولد

اطمینان حاصل کنید که سیستم‌های هوش مصنوعی محتوای رسانه‌ای غیرقانونی، مضر یا غیرمجاز تولید نکنند، از طریق اعمال محدودیت‌های سیاستی، اعتبارسنجی خروجی و قابلیت ردیابی.

|   #   | توضیحات                                                                                                                                                                                     | سطح | نقش |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.7.1 | تأیید کنید که دستورهای سیستم و راهنمایی‌های کاربر به‌طور صریح تولید رسانه‌های دیپ‌فیک غیرقانونی، مضر یا بدون رضایت (مانند تصویر، ویدئو، صدا) را ممنوع می‌کنند.                              |  1  | D/V |
| 7.7.2 | تأیید کنید که درخواست‌ها برای تلاش‌های ایجاد تقلید از شخصیت‌ها، تصاویر جعلی جنسی صریح، یا رسانه‌هایی که افراد واقعی را بدون رضایت نشان می‌دهند، فیلتر می‌شوند.                              |  2  | D/V |
| 7.7.3 | تأیید کنید که سیستم از هش گیری ادراکی، تشخیص نشان‌گذاری یا اثرانگشت‌گذاری برای جلوگیری از تکثیر غیرمجاز رسانه‌های دارای حق نشر استفاده می‌کند.                                              |  2  |  V  |
| 7.7.4 | اطمینان حاصل کنید که تمام رسانه‌های تولید شده به‌طور رمزنگاری امضا شده، دارای علامت آبی (واترمارک)، یا همراه با متادیتای اثبات منبع مقاوم در برابر دستکاری برای ردیابی در مراحل بعدی باشند. |  3  | D/V |
| 7.7.5 | اطمینان حاصل کنید که تلاش‌های دور زدن (مانند مبهم‌سازی دستورات، زبان عامیانه، عبارت‌بندی خصمانه) شناسایی، ثبت و نرخ محدود می‌شوند؛ سوءاستفاده مکرر به سیستم‌های نظارتی گزارش داده می‌شود.   |  3  |  V  |

## مراجع

* [NIST AI Risk Management Framework](https://www.nist.gov/itl/ai-risk-management-framework)
* [ISO/IEC 42001:2023 – AI Management System](https://www.iso.org/obp/ui/en/)
* [OWASP Top-10 for Large Language Model Applications (2025)](https://owasp.org/www-project-top-10-for-large-language-model-applications/)
* [Improper Output Handling – OWASP LLM05:2025](https://genai.owasp.org/llmrisk/llm052025-improper-output-handling/)
* [Practical Techniques to Constrain LLM Output](https://mychen76.medium.com/practical-techniques-to-constraint-llm-output-in-json-format-e3e72396c670)
* [Dataiku – Structured Text Generation Guide](https://blog.dataiku.com/your-guide-to-structured-text-generation)
* [VL-Uncertainty: Detecting Hallucinations](https://arxiv.org/abs/2411.11919)
* [HaDeMiF: Hallucination Detection & Mitigation](https://openreview.net/forum?id=VwOYxPScxB)
* [Building Confidence in LLM Outputs](https://www.alkymi.io/data-science-room/building-confidence-in-llm-outputs)
* [Explainable AI & LLMs](https://duncsand.medium.com/explainable-ai-140912d31b3b)
* [LLM Red-Teaming Guide](https://www.confident-ai.com/blog/red-teaming-llms-a-step-by-step-guide)
* [Sensitive Information Disclosure in LLMs](https://virtualcyberlabs.com/llm-sensitive-information-disclosure/)
* [LangChain – Chat Model Rate Limiting](https://python.langchain.com/docs/how_to/chat_model_rate_limiting/)
* [OpenAI Rate-Limit & Exponential Back-off](https://hackernoon.com/openais-rate-limit-a-guide-to-exponential-backoff-for-llm-evaluation)
* [Arize AI – LLM Observability Platform](https://arize.com/)

