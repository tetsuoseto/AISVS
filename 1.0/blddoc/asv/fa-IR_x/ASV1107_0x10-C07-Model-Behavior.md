# رفتار مدل C7، کنترل خروجی و تضمین ایمنی

## هدف کنترل

خروجی‌های مدل باید ساختارمند، قابل اعتماد، ایمن، قابل توضیح و به طور مداوم در محیط تولید نظارت شده باشند. انجام این کار باعث کاهش توهمات، نشت‌های حریم خصوصی، محتوای مضر و اقدامات خارج از کنترل شده و در عین حال افزایش اعتماد کاربران و رعایت مقررات می‌شود.

---

## C7.1 اجرای قالب خروجی

اسکیماهای سختگیرانه، کدگذاری محدود شده، و اعتبارسنجی در مراحل بعدی از انتشار محتوای نادرست یا مخرب جلوگیری می‌کنند.

|   #   | توضیحات                                                                                                                                                                                      | سطح | نقش |
| :---: | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.1.1 | تأیید کنید که طرح‌های پاسخ (مثلاً JSON Schema) در پیام سیستم ارائه شده‌اند و هر خروجی به‌طور خودکار اعتبارسنجی می‌شود؛ خروجی‌های نامطابق باعث فعال شدن فرآیند تعمیر یا رد می‌شوند.           |  1  | D/V |
| 7.1.2 | تأیید کنید که رمزگشایی محدود شده (توکن‌های توقف، عبارات منظم، حداکثر تعداد توکن‌ها) فعال است تا از سرریز یا کانال‌های کناری نفوذ در پرسش‌نامه جلوگیری شود.                                   |  1  | D/V |
| 7.1.3 | اطمینان حاصل کنید که اجزای پایین‌دستی خروجی‌ها را به عنوان داده‌های غیر قابل اعتماد در نظر می‌گیرند و آن‌ها را بر اساس طرح‌واره‌ها یا دِسریالایزرهای ایمن در برابر تزریق اعتبارسنجی می‌کنند. |  2  | D/V |
| 7.1.4 | اطمینان حاصل کنید که رویدادهای خروجی نامناسب ثبت، محدود به نرخ و به سیستم مانیتورینگ ارسال می‌شوند.                                                                                          |  3  |  V  |

---

## C7.2 شناسایی و کاهش هلوکینیشن

برآورد عدم قطعیت و استراتژی‌های جایگزین پاسخ‌های ساختگی را محدود می‌کنند.

|   #   | توضیحات                                                                                                                                                                               | سطح | نقش |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.2.1 | تأیید کنید که احتمال‌های لوگ‌ترازوی سطح توکن، انسجام خودی مجموعه‌ای، یا آشکارسازهای هذیان تنظیم شده دقیق، به هر پاسخ یک نمره اعتماد اختصاص می‌دهند.                                   |  1  | D/V |
| 7.2.2 | اطمینان حاصل کنید که پاسخ‌هایی که پایین‌تر از آستانه اطمینان قابل تنظیم هستند، جریان‌های کاری جایگزین (مانند تولید افزوده با بازیابی، مدل ثانویه، یا بازبینی انسانی) را فعال می‌کنند. |  1  | D/V |
| 7.2.3 | اطمینان حاصل کنید که حوادث هذیان با متاداده علت ریشه‌ای برچسب‌گذاری شده و به خطوط لوله پست‌مورتوم و تنظیم دقیق ارسال می‌شوند.                                                         |  2  | D/V |
| 7.2.4 | اطمینان حاصل کنید که آستانه‌ها و آشکارسازها پس از به‌روزرسانی‌های عمده مدل یا پایگاه دانش دوباره کالیبره شوند.                                                                        |  3  | D/V |
| 7.2.5 | تأیید کنید که ویژوال‌سازی‌های داشبورد نرخ‌های هذیان‌گویی را دنبال می‌کنند.                                                                                                            |  3  |  V  |

---

## C7.3 فیلترینگ ایمنی و حریم خصوصی خروجی

فیلترهای سیاستی و پوشش تیم قرمز از کاربران و داده‌های محرمانه محافظت می‌کنند.

|   #   | توضیحات                                                                                                                                               | سطح | نقش |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.3.1 | تأیید کنید که طبقه‌بندی‌کننده‌های قبل و بعد از تولید، محتوای نفرت‌انگیز، آزاردهنده، خودآسیب رسان، افراطی و جنسی صریح مطابق با سیاست را مسدود می‌کنند. |  1  | D/V |
| 7.3.2 | تأیید کنید که شناسایی PII/PCI و حذف خودکار در هر پاسخ اجرا شود؛ تخلفات باعث ایجاد حادثه حریم خصوصی می‌شود.                                            |  1  | D/V |
| 7.3.3 | تأیید کنید که برچسب‌های محرمانگی (مانند اسرار تجاری) در سراسر حالت‌ها منتقل می‌شوند تا از نشت اطلاعات در متن، تصاویر یا کد جلوگیری شود.               |  2  |  D  |
| 7.3.4 | اطمینان حاصل کنید که تلاش‌های عبور از فیلتر یا دسته‌بندی‌های با ریسک بالا نیاز به تأییدیه ثانویه یا احراز هویت مجدد کاربر دارند.                      |  3  | D/V |
| 7.3.5 | تأیید کنید که آستانه‌های فیلتر کردن منعکس‌کننده حوزه‌های قضایی قانونی و زمینه سن/نقش کاربر باشند.                                                     |  3  | D/V |

---

## C7.4 محدودسازی خروجی و اقدامات

محدودیت‌های نرخ و دروازه‌های تأیید از سوءاستفاده و خودمختاری بیش از حد جلوگیری می‌کنند.

|   #   | توضیحات                                                                                                                                                                     | سطح | نقش |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.4.1 | تأیید کنید که سهمیه‌های هر کاربر و هر کلید API، درخواست‌ها، توکن‌ها و هزینه‌ها را با استفاده از بازگشت نمایی (exponential back-off) در هنگام بروز خطاهای 429 محدود می‌کنند. |  1  |  D  |
| 7.4.2 | اطمینان حاصل کنید که اقدامات دارای امتیاز ویژه (نوشتن فایل، اجرای کد، تماس‌های شبکه) نیازمند تأیید مبتنی بر سیاست یا دخالت انسان هستند.                                     |  1  | D/V |
| 7.4.3 | اطمینان حاصل کنید که بررسی‌های تطابق میان‌حسی تضمین می‌کنند تصاویر، کد، و متنی که برای یک درخواست مشابه تولید شده‌اند، نمی‌توانند برای قاچاق محتوای مخرب استفاده شوند.      |  2  | D/V |
| 7.4.4 | اطمینان حاصل کنید که عمق تفویض اختیار عامل، محدودیت‌های بازگشتی، و فهرست ابزارهای مجاز به‌طور صریح پیکربندی شده‌اند.                                                        |  2  |  D  |
| 7.4.5 | تأیید کنید که نقض محدودیت‌ها رویدادهای امنیتی ساختاریافته‌ای را برای جذب در سیستم SIEM ارسال می‌کند.                                                                        |  3  |  V  |

---

## C7.5 قابلیت توضیح خروجی

سیگنال‌های شفاف اعتماد کاربر و اشکال‌زدایی داخلی را بهبود می‌بخشند.

|   #   | توضیحات                                                                                                                                             | سطح | نقش |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.5.1 | اطمینان حاصل کنید که امتیازهای اطمینان قابل مشاهده برای کاربر یا خلاصه‌های مختصر استدلال زمانی که ارزیابی ریسک مناسب تشخیص می‌دهد، نمایش داده شوند. |  2  | D/V |
| 7.5.2 | اطمینان حاصل کنید که توضیحات تولید شده از افشای دستورات حساس سیستم یا داده‌های مالکیتی جلوگیری می‌کنند.                                             |  2  | D/V |
| 7.5.3 | تأیید کنید که سیستم احتمال‌های لاگ در سطح توکن یا نقشه‌های توجه را ثبت می‌کند و آن‌ها را برای بازرسی مجاز ذخیره می‌کند.                             |  3  |  D  |
| 7.5.4 | اطمینان حاصل کنید که آثار قابلیت توضیح‌دهی همراه با نسخه‌های مدل برای قابلیت حسابرسی، تحت کنترل نسخه قرار دارند.                                    |  3  |  V  |

---

## C7.6 ادغام پایش

قابلیت مشاهده در زمان واقعی حلقه بین توسعه و تولید را بسته می‌کند.

|   #   | توضیحات                                                                                                                                                  | سطح | نقش |
| :---: | -------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.6.1 | اطمینان حاصل کنید که معیارها (نقض‌های طرحواره، نرخ توهم‌زایی، سمی بودن، نشت اطلاعات شناسایی شخصی، تأخیر، هزینه) به یک پلتفرم نظارتی مرکزی ارسال می‌شوند. |  1  |  D  |
| 7.6.2 | تأیید کنید که آستانه‌های هشدار برای هر معیار ایمنی تعریف شده باشند، همراه با مسیرهای ارتقاء در زمان تماس اضطراری.                                        |  1  |  V  |
| 7.6.3 | بررسی کنید که داشبوردها ناهنجاری‌های خروجی را با مدل/نسخه، علامت ویژگی و تغییرات داده‌های بالادستی مرتبط می‌کنند.                                        |  2  |  V  |
| 7.6.4 | تأیید کنید که داده‌های پایش به‌عنوان ورودی به بازآموزی، تنظیم دقیق، یا به‌روزرسانی قوانین در یک روند کاری مستند MLOps بازخورد داده می‌شوند.              |  2  | D/V |
| 7.6.5 | تأیید کنید که خطوط لوله نظارتی از نظر نفوذ تست شده و کنترل دسترسی شده‌اند تا از لو رفتن لاگ‌های حساس جلوگیری شود.                                        |  3  |  V  |

---

## 7.7 تدابیر حفاظتی رسانه‌های مولد

اطمینان حاصل کنید که سیستم‌های هوش مصنوعی محتوای رسانه‌ای غیرقانونی، مضر یا غیرمجاز تولید نکنند از طریق اعمال محدودیت‌های سیاستی، اعتبارسنجی خروجی و قابلیت رصد.

|   #   | توضیحات                                                                                                                                                                                       | سطح | نقش |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :-: |
| 7.7.1 | اطمینان حاصل کنید که دستورات سیستم و راهنمایی‌های کاربر به‌طور صریح تولید رسانه‌های دیپ‌فیک غیرقانونی، مضر یا بدون رضایت (مانند تصویر، ویدئو، صدا) را ممنوع می‌کنند.                          |  1  | D/V |
| 7.7.2 | اطمینان حاصل کنید که درخواست‌ها برای تلاش‌های تولید جعل هویت، دیپ‌فیک‌های جنسی صریح، یا رسانه‌هایی که افراد واقعی را بدون رضایت نشان می‌دهند، فیلتر می‌شوند.                                  |  2  | D/V |
| 7.7.3 | تأیید کنید که سیستم از هش درک‌شناختی، تشخیص واترمارک، یا اثرانگشت‌نگاری برای جلوگیری از تکثیر بدون اجازه رسانه‌های دارای حق انتشار استفاده می‌کند.                                            |  2  |  V  |
| 7.7.4 | اطمینان حاصل کنید که تمام رسانه‌های تولید شده به‌صورت رمزنگاری‌شده امضا شده، دارای واترمارک هستند یا با متاداده‌های اثبات منشأ مقاوم در برابر تغییر برای ردیابی در مراحل بعدی، تعبیه شده‌اند. |  3  | D/V |
| 7.7.5 | اطمینان حاصل کنید که تلاش‌های دور زدن (مانند پیچیده‌سازی درخواست، زبان عامیانه، عبارت‌بندی خصمانه) شناسایی، ثبت، و نرخ محدود می‌شوند؛ سوء استفاده مکرر به سیستم‌های نظارت گزارش داده شود.     |  3  |  V  |

## مراجع

* [NIST AI Risk Management Framework](https://www.nist.gov/itl/ai-risk-management-framework)
* [ISO/IEC 42001:2023 – AI Management System](https://www.iso.org/obp/ui/en/)
* [OWASP Top-10 for Large Language Model Applications (2025)](https://owasp.org/www-project-top-10-for-large-language-model-applications/)
* [Improper Output Handling – OWASP LLM05:2025](https://genai.owasp.org/llmrisk/llm052025-improper-output-handling/)
* [Practical Techniques to Constrain LLM Output](https://mychen76.medium.com/practical-techniques-to-constraint-llm-output-in-json-format-e3e72396c670)
* [Dataiku – Structured Text Generation Guide](https://blog.dataiku.com/your-guide-to-structured-text-generation)
* [VL-Uncertainty: Detecting Hallucinations](https://arxiv.org/abs/2411.11919)
* [HaDeMiF: Hallucination Detection & Mitigation](https://openreview.net/forum?id=VwOYxPScxB)
* [Building Confidence in LLM Outputs](https://www.alkymi.io/data-science-room/building-confidence-in-llm-outputs)
* [Explainable AI & LLMs](https://duncsand.medium.com/explainable-ai-140912d31b3b)
* [LLM Red-Teaming Guide](https://www.confident-ai.com/blog/red-teaming-llms-a-step-by-step-guide)
* [Sensitive Information Disclosure in LLMs](https://virtualcyberlabs.com/llm-sensitive-information-disclosure/)
* [LangChain – Chat Model Rate Limiting](https://python.langchain.com/docs/how_to/chat_model_rate_limiting/)
* [OpenAI Rate-Limit & Exponential Back-off](https://hackernoon.com/openais-rate-limit-a-guide-to-exponential-backoff-for-llm-evaluation)
* [Arize AI – LLM Observability Platform](https://arize.com/)

