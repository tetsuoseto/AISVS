# Поведение модели C7, контроль вывода и обеспечение безопасности

## Цель контроля

Выходные данные модели должны быть структурированными, надежными, безопасными, объяснимыми и постоянно контролироваться в производственной среде. Это снижает количество галлюцинаций, утечек конфиденциальной информации, вредоносного контента и неконтролируемых действий, одновременно повышая доверие пользователей и соответствие нормативным требованиям.

---

## C7.1 Принудительное соблюдение формата вывода

Строгие схемы, ограниченный декодинг и последующая проверка предотвращают распространение неправильно сформированного или вредоносного контента.

|   #   | Описание                                                                                                                                                                                                       | Уровень | Роль |
| :---: | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-----: | :--: |
| 7.1.1 | Убедитесь, что схемы ответов (например, JSON Schema) предоставлены в системном запросе, и каждый вывод автоматически проверяется; выходы, не соответствующие требованиям, вызывают исправление или отклонение. |    1    | D/V  |
| 7.1.2 | Проверьте, что ограниченное декодирование (стоп-токены, регулярные выражения, максимальное количество токенов) включено для предотвращения переполнения или побочных каналов внедрения в подсказку.            |    1    | D/V  |
| 7.1.3 | Проверьте, что последующие компоненты обрабатывают выходные данные как ненадежные и проверяют их на соответствие схемам или используют безопасные от инъекций десериализаторы.                                 |    2    | D/V  |
| 7.1.4 | Проверьте, что события с некорректным выводом регистрируются, ограничиваются по частоте и отображаются в системе мониторинга.                                                                                  |    3    |  V   |

---

## C7.2 Обнаружение и смягчение галлюцинаций

Оценка неопределённости и стратегии резервного перехода ограничивают создание вымышленных ответов.

|   #   | Описание                                                                                                                                                                                                                    | Уровень | Роль |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-----: | :--: |
| 7.2.1 | Проверьте, что логарифмические вероятности на уровне токенов, ансамблевая самосогласованность или специализированные детекторы галлюцинаций назначают каждому ответу оценку уверенности.                                    |    1    | D/V  |
| 7.2.2 | Проверьте, что ответы с уровнем уверенности ниже настраиваемого порога активируют резервные рабочие процессы (например, генерация с использованием дополнения извлеченных данных, вторичная модель или проверка человеком). |    1    | D/V  |
| 7.2.3 | Убедитесь, что случаи галлюцинаций отмечены метаданными с указанием первопричины и переданы в процессы посмертного анализа и дообучения.                                                                                    |    2    | D/V  |
| 7.2.4 | Проверьте, что пороги и детекторы перенастроены после крупных обновлений модели или базы знаний.                                                                                                                            |    3    | D/V  |
| 7.2.5 | Проверьте, что визуализации на панели отслеживают уровень галлюцинаций.                                                                                                                                                     |    3    |  V   |

---

## C7.3 Фильтрация безопасности и конфиденциальности вывода

Фильтры политик и покрытие красной команды защищают пользователей и конфиденциальные данные.

|   #   | Описание                                                                                                                                                                                                   | Уровень | Роль |
| :---: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-----: | :--: |
| 7.3.1 | Проверьте, что классификаторы до и после генерации блокируют контент, связанный с ненавистью, домогательствами, самоповреждением, экстремизмом и сексуально откровенный контент, соответствующий политике. |    1    | D/V  |
| 7.3.2 | Убедитесь, что обнаружение PII/PCI и автоматическое удаление выполняются для каждого ответа; нарушения вызывают инцидент по вопросам конфиденциальности.                                                   |    1    | D/V  |
| 7.3.3 | Проверьте, что теги конфиденциальности (например, коммерческая тайна) распространяются между модальностями для предотвращения утечки в тексте, изображениях или коде.                                      |    2    |  D   |
| 7.3.4 | Проверьте, что попытки обхода фильтра или классификации с высоким риском требуют вторичного утверждения или повторной аутентификации пользователя.                                                         |    3    | D/V  |
| 7.3.5 | Проверьте, что пороги фильтрации соответствуют юридическим юрисдикциям и контексту возраста/роли пользователя.                                                                                             |    3    | D/V  |

---

## C7.4 Ограничение вывода и действий

Ограничения по скорости и контрольные точки одобрения предотвращают злоупотребления и чрезмерную автономию.

|   #   | Описание                                                                                                                                                                                                    | Уровень | Роль |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-----: | :--: |
| 7.4.1 | Проверьте, что квоты на пользователя и на ключ API ограничивают количество запросов, токенов и стоимость с экспоненциальным увеличением времени ожидания при ошибках 429.                                   |    1    |  D   |
| 7.4.2 | Проверьте, что для выполнения привилегированных действий (запись в файлы, выполнение кода, сетевые вызовы) требуется одобрение на основе политики или участие человека в процессе.                          |    1    | D/V  |
| 7.4.3 | Проверьте, что проверки кросс-модальной согласованности гарантируют, что изображения, код и текст, сгенерированные по одному и тому же запросу, не могут использоваться для переноса вредоносного контента. |    2    | D/V  |
| 7.4.4 | Проверьте, что глубина делегирования агента, ограничения рекурсии и списки разрешенных инструментов настроены явно.                                                                                         |    2    |  D   |
| 7.4.5 | Проверьте, что нарушение лимитов генерирует структурированные события безопасности для интеграции с SIEM.                                                                                                   |    3    |  V   |

---

## C7.5 Объяснимость вывода

Прозрачные сигналы повышают доверие пользователей и упрощают внутреннее отладку.

|   #   | Описание                                                                                                                                                 | Уровень | Роль |
| :---: | -------------------------------------------------------------------------------------------------------------------------------------------------------- | :-----: | :--: |
| 7.5.1 | Убедитесь, что наглядные для пользователя оценки уверенности или краткие резюме рассуждений отображаются, когда оценка риска считает это целесообразным. |    2    | D/V  |
| 7.5.2 | Проверьте, что сгенерированные объяснения не раскрывают конфиденциальные системные подсказки или закрытые данные.                                        |    2    | D/V  |
| 7.5.3 | Проверьте, что система захватывает логарифмические вероятности на уровне токенов или карты внимания и сохраняет их для авторизованного просмотра.        |    3    |  D   |
| 7.5.4 | Убедитесь, что артефакты объяснимости находятся под версионным контролем вместе с выпусками моделей для обеспечения возможности аудита.                  |    3    |  V   |

---

## C7.6 Интеграция мониторинга

Непрерывная наблюдаемость в реальном времени замыкает цикл между разработкой и производством.

|   #   | Описание                                                                                                                                                                     | Уровень | Роль |
| :---: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-----: | :--: |
| 7.6.1 | Проверьте, что метрики (нарушения схемы, уровень галлюцинаций, токсичность, утечки персональных данных, задержка, стоимость) передаются в центральную платформу мониторинга. |    1    |  D   |
| 7.6.2 | Проверьте, что для каждого показателя безопасности установлены пороговые значения оповещений с путями эскалации для дежурного персонала.                                     |    1    |  V   |
| 7.6.3 | Проверьте, что панели управления связывают аномалии в выходных данных с моделью/версией, флагом функции и изменениями вышестоящих данных.                                    |    2    |  V   |
| 7.6.4 | Проверьте, что данные мониторинга возвращаются в процесс дообучения, тонкой настройки или обновления правил в рамках документированного MLOps-воркфлоу.                      |    2    | D/V  |
| 7.6.5 | Проверьте, что конвейеры мониторинга прошли тестирование на проникновение и имеют контроль доступа для предотвращения утечки конфиденциальных логов.                         |    3    |  V   |

---

## 7.7 Меры безопасности для генеративных медиа

Обеспечьте, чтобы системы ИИ не генерировали незаконный, вредоносный или несанкционированный медиаконтент за счет применения ограничений политики, проверки выходных данных и обеспечения отслеживаемости.

|   #   | Описание                                                                                                                                                                                                          | Уровень | Роль |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-----: | :--: |
| 7.7.1 | Проверьте, что системные подсказки и инструкции для пользователя явно запрещают создание незаконных, вредоносных или несогласованных дипфейк-медиа (например, изображений, видео, аудио).                         |    1    | D/V  |
| 7.7.2 | Проверьте, чтобы запросы фильтровались на предмет попыток создать имитации, сексуально откровенные дипфейки или материалы с изображением реальных лиц без их согласия.                                            |    2    | D/V  |
| 7.7.3 | Проверьте, что система использует перцептивное хеширование, обнаружение водяных знаков или цифровое отпечатков для предотвращения несанкционированного воспроизведения защищенных авторским правом медиа.         |    2    |  V   |
| 7.7.4 | Проверьте, что все сгенерированные медиа подписаны криптографически, снабжены водяными знаками или содержат встроенные метаданные происхождения с защитой от подделки для последующей отслеживаемости.            |    3    | D/V  |
| 7.7.5 | Убедитесь, что попытки обхода (например, запутывание подсказок, сленг, враждебная формулировка) обнаруживаются, регистрируются и ограничиваются по частоте; повторные нарушения передаются в системы мониторинга. |    3    |  V   |

## Ссылки

* [NIST AI Risk Management Framework](https://www.nist.gov/itl/ai-risk-management-framework)
* [ISO/IEC 42001:2023 – AI Management System](https://www.iso.org/obp/ui/en/)
* [OWASP Top-10 for Large Language Model Applications (2025)](https://owasp.org/www-project-top-10-for-large-language-model-applications/)
* [Improper Output Handling – OWASP LLM05:2025](https://genai.owasp.org/llmrisk/llm052025-improper-output-handling/)
* [Practical Techniques to Constrain LLM Output](https://mychen76.medium.com/practical-techniques-to-constraint-llm-output-in-json-format-e3e72396c670)
* [Dataiku – Structured Text Generation Guide](https://blog.dataiku.com/your-guide-to-structured-text-generation)
* [VL-Uncertainty: Detecting Hallucinations](https://arxiv.org/abs/2411.11919)
* [HaDeMiF: Hallucination Detection & Mitigation](https://openreview.net/forum?id=VwOYxPScxB)
* [Building Confidence in LLM Outputs](https://www.alkymi.io/data-science-room/building-confidence-in-llm-outputs)
* [Explainable AI & LLMs](https://duncsand.medium.com/explainable-ai-140912d31b3b)
* [LLM Red-Teaming Guide](https://www.confident-ai.com/blog/red-teaming-llms-a-step-by-step-guide)
* [Sensitive Information Disclosure in LLMs](https://virtualcyberlabs.com/llm-sensitive-information-disclosure/)
* [LangChain – Chat Model Rate Limiting](https://python.langchain.com/docs/how_to/chat_model_rate_limiting/)
* [OpenAI Rate-Limit & Exponential Back-off](https://hackernoon.com/openais-rate-limit-a-guide-to-exponential-backoff-for-llm-evaluation)
* [Arize AI – LLM Observability Platform](https://arize.com/)

