# 9 תיאום אוטונומי ואבטחה לפעולה סוכניית

## מטרת הבקרה

ודא שמערכות בינה מלאכותית אוטונומיות או מרובי-סוכנים יכולות לבצע רק פעולות שהכוונה להן מוגדרת במפורש, מאומתות, ניתנות לביקורת, ובמסגרות עלות וסיכון מוגבלות. זה מגן מפני איומים כגון פגיעה במערכת אוטונומית, שימוש לרעה בכלים, גילוי מעגל סוכן, השתלטות על תקשורת, זיוף זהות, הטיית התנהגות צביר-סוכנים, והטיית כוונה.

---

## 9.1 תכנון משימות סוכן והקצבות רקורסיה

להאט תוכניות רקורסיביות ולאכוף נקודות ביקורת אנושיות לפעולות עם הרשאות מוגברות.

|   #   | תיאור                                                                                                                                             | רמה | תפקיד |
| :---: | ------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 9.1.1 | ודא כי עומק הרקורסיה המרבי, רוחב החיפוש, זמן הקיר, טוקנים ועלות כספית לכל הרצת סוכן מוגדרים באופן מרכזי ומנוהלים בבקרת גרסאות.                    |  1  |  D/V  |
| 9.1.2 | ודא שפעולות בעלות הרשאה גבוהה או בלתי הפיכות דורשות אישור מפורש מאדם באמצעות ערוץ שניתן לביקורת לפני הביצוע (למשל, התחייבויות קוד, העברות כספים). |  1  |  D/V  |
| 9.1.3 | ודא שניטורי משאבים בזמן אמת מפעילים הפסקה באמצעות מפסק המעגל כאשר יעלה על כל סף תקציב, ובכך מונעים הרחבת משימות נוספות.                           |  2  |   D   |
| 9.1.4 | ודא שאירועי מפסק מעגל מתועדים עם מזהה הסוכן, תנאי ההפעלה, ומצב התוכנית שנאסף, עבור סקירה פורנזית.                                                 |  2  |  D/V  |
| 9.1.5 | ודא כי בדיקות האבטחה מכסות תרחישי ההתרוקנות-תקציבית ותרחישי תוכנית-בריחה, וכי העצירה בטוחה ללא אובדן נתונים.                                      |  3  |   V   |
| 9.1.6 | ודא שמדיניות התקציב מובעת כמדיניות-כקוד ומוחלת ב-CI/CD כדי לחסום סטיית תצורה.                                                                     |  3  |   D   |

---

## 9.2 סנדבוקסינג של תוספי כלים

בידוד אינטראקציות עם כלים כדי למנוע גישה לא מורשית למערכת או הרצת קוד.

|   #   | תיאור                                                                                                                                          | רמה | תפקיד |
| :---: | ---------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 9.2.1 | ודא שכל כלי/תוסף פועל בתוך סנדבוקס ברמת מערכת ההפעלה, קונטיינר, או WASM, עם מדיניות זכויות-גישה מינימליות למערכת הקבצים, לרשת ולקריאות המערכת. |  1  |  D/V  |
| 9.2.2 | בדוק כי הקצבות המשאבים של הסנדבוקס (CPU, זיכרון, דיסק, תעבורת רשת היוצאת) והזמנים הקצובים לביצוע נאכפים ונרשמים.                               |  1  |  D/V  |
| 9.2.3 | ודא כי קבצי בינאריים של כלי או תיאורי כלי חתומים דיגיטליים; החתימות מאומתות לפני הטעינה.                                                       |  2  |  D/V  |
| 9.2.4 | ודא שזרמי הטלמטריה מהסנדבוקס מועברים ל-SIEM; אנומליות (למשל, ניסיונות חיבור היוצאים החוצה) מעלות התראות.                                       |  2  |   V   |
| 9.2.5 | ודא כי תוספים בעלי סיכון גבוה עוברים סקירת אבטחה ובדיקות חדירה לפני פריסת סביבת ייצור.                                                         |  3  |   V   |
| 9.2.6 | ודא שניסיונות בריחת סנדבוקס נחסמים באופן אוטומטי, והפלגין המפר מבודד בהסגר עד לחקירה.                                                          |  3  |  D/V  |

---

## 9.3 לולאה אוטונומית & הגבלת עלות

לאתר ולהפסיק רקורסיה בלתי נשלטת בין סוכנים ופיצוצים בעלויות.

|   #   | תיאור                                                                                              | רמה | תפקיד |
| :---: | -------------------------------------------------------------------------------------------------- | :-: | :---: |
| 9.3.1 | ודא שקריאות בין-סוכנים כוללות מגבלת קפיצות או TTL, שהזמן הריצה יוריד אותה ויאכוף אותה.             |  1  |  D/V  |
| 9.3.2 | ודא שסוכנים שומרים על מזהה ייחודי לגרף קריאות לפונקציות כדי לזהות קריאה עצמית או דפוסים מעגליים.   |  2  |   D   |
| 9.3.3 | ודא שיחידות החישוב המצטברות וספירות ההוצאות נעקבות לפי שרשרת הבקשות; חריגה מהמגבלה תבטל את השרשרת. |  2  |  D/V  |
| 9.3.4 | ודא כי ניתוח פורמלי או בדיקת מודל מראה היעדר רקורסיה בלתי מוגבלת בפרוטוקולי סוכנים.                |  3  |   V   |
| 9.3.5 | ודא שאירועי עצירת לולאה מייצרים התראות ומזינים מדדי שיפור מתמשך.                                   |  3  |   D   |

---

## 9.4 הגנה מפני שימוש לרעה ברמת הפרוטוקול

ערוצי תקשורת מאובטחים בין סוכנים למערכות חיצוניות כדי למנוע השתלטות או מניפולציה.

|   #   | תיאור                                                                                            | רמה | תפקיד |
| :---: | ------------------------------------------------------------------------------------------------ | :-: | :---: |
| 9.4.1 | ודא שכל ההודעות בין סוכן-לכלי ובין סוכן-לסוכן מאומתות (למשל TLS הדדי או JWT) ומוצפנות מקצה-לקצה. |  1  |  D/V  |
| 9.4.2 | ודא שהסכמות נבדקות בקפדנות; שדות שאינם מוכרים או הודעות פגומות יידחו.                            |  1  |   D   |
| 9.4.3 | ודא שאימות שלמות (MACs או חתימות דיגיטליות) מכסה את כל מטען ההודעה כולל פרמטרי הכלי.             |  2  |  D/V  |
| 9.4.4 | ודא שההגנה מפני שחזור (nonces או חלונות זמן) מיושמת בשכבת הפרוטוקول.                             |  2  |   D   |
| 9.4.5 | ודא שמימושי הפרוטוקול עוברים fuzzing ובניתוח סטטי כדי לזהות פרצות בהזרקה או ב-deserialization.   |  3  |   V   |

---

## 9.5 זהות הסוכן & עדות התערבות

ודא שהפעולות ניתנות ליחוס ושינויים ניתנים לזיהוי.

|   #   | תיאור                                                                                                          | רמה | תפקיד |
| :---: | -------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 9.5.1 | ודא שכל מופע של סוכן מחזיק זהות קריפטוגרפית ייחודית (זוג מפתחות קריפטוגרפיים או אישור מבוסס חומרה).            |  1  |  D/V  |
| 9.5.2 | ודא שכל פעולות הסוכן חתומות ובעלות חותמת זמן; יומנים כוללים את החתימה למניעת הכחשה.                            |  2  |  D/V  |
| 9.5.3 | ודא שיומני הוכחות לשינויים מאוחסנים במדיה להוספה בלבד (append-only) או במדיה שנכתבת פעם אחת בלבד (write-once). |  2  |   V   |
| 9.5.4 | ודא שמפתחות זהות מוחלפים על פי לוח זמנים מוגדר וגם על סמך אינדיקטורים להפרה.                                   |  3  |   D   |
| 9.5.5 | ודא שנסיונות זיוף או התנגשות מפתחות יגרמו לבידוד מיידי של הסוכן שנפגע.                                         |  3  |  D/V  |

---

## 9.6 הפחתת סיכונים בצב מרובי-סוכנים

להפחית סכנות-התנהגות-קולקטיבית באמצעות בידוד ומודלים פורמליים לבטיחות.

|   #   | תיאור                                                                                                     | רמה | תפקיד |
| :---: | --------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 9.6.1 | ודא שסוכנים הפועלים בתחומי אבטחה שונים מופעלים בתוך סנדבוקסים בזמן הריצה מבודדים או בתוך סגמנטים של הרשת. |  1  |  D/V  |
| 9.6.2 | ודאו שהתנהגויות הלהקה מודלות ומאומתות באופן פורמללי לחיוניות ולבטיחות לפני הפריסה.                        |  3  |   V   |
| 9.6.3 | ודא שמנטרים בזמן הריצה מזהים דפוסים מסוכנים המתהווים (למשל, תנודות, תקיעות) ומפעילים פעולה מתקנת.         |  3  |   D   |

---

## 9.7 אימות והרשאה של משתמש וכלי

יישם מנגנוני בקרת גישה חזקים לכל פעולה שמופעלת על-ידי סוכן.

|   #   | תיאור                                                                                                               | רמה | תפקיד |
| :---: | ------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 9.7.1 | ודא שסוכנים מאמתים את עצמם כפרינציפלים מהדרגה הראשונה למערכות downstream, ולא ישתמשו שוב בפרטי אימות של משתמש הקצה. |  1  |  D/V  |
| 9.7.2 | ודא שמדיניות הרשאה מפורטת מגבילה אילו כלים יכול הסוכן להפעיל ואילו פרמטרים הוא יכול לספק.                           |  2  |   D   |
| 9.7.3 | ודא שבדיקות ההרשאות מוערכות מחדש בכל קריאה (אישור מתמשך), ולא רק בתחילת הסשן.                                       |  2  |   V   |
| 9.7.4 | ודא שההרשאות המוקצות פוקעות באופן אוטומטי ודורשות הסכמה מחדש לאחר זמן הקצוב או שינוי היקף.                          |  3  |   D   |

---

## 9.8 אבטחת תקשורת סוכן-אל-סוכן

הצפן והגן על שלמות כל ההודעות בין-סוכנים כדי למנוע האזנת סתר ושיבוש.

|   #   | תיאור                                                                                                          | רמה | תפקיד |
| :---: | -------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 9.8.1 | ודא כי אימות הדדי וסודיות קדימה מושלמת (למשל TLS 1.3) מהווים תנאי חובה עבור ערוצי הסוכן.                       |  1  |  D/V  |
| 9.8.2 | ודא כי שלמות ההודעה ומקורה מאומתים לפני העיבוד; כשלונות יגרמו להתרעות ולזריקת ההודעה.                          |  1  |   D   |
| 9.8.3 | ודא כי מטא-נתוני התקשורת (חותמות זמן, מספרי רצף) מתועדים כדי לתמוך בשחזור פורנזי.                              |  2  |  D/V  |
| 9.8.4 | ודא כי אימות פורמלי או בדיקת מודל מאשר את העובדה שמכונות מצב של הפרוטוקול אינן יכולות להיכנס למצבים לא בטוחים. |  3  |   V   |

---

## 9.9 אימות כוונה & אכיפת אילוצים

וודא שפעולות הסוכן תואמות את כוונת המשתמש שהוצגה ואת מגבלות המערכת.

|   #   | תיאור                                                                                                                           | רמה | תפקיד |
| :---: | ------------------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 9.9.1 | ודא כי פתרוני ההגבלות לפני הביצוע בודקים את הפעולות המוצעות כנגד כללי בטיחות ונהלי מדיניות שקבעו מראש.                          |  1  |   D   |
| 9.9.2 | ודא כי פעולות בעלות השפעה גבוהה (פיננסיות, הרסניות, רגישות לפרטיות) דורשות אימות כוונה מפורש מהמשתמש היוזם.                     |  2  |  D/V  |
| 9.9.3 | ודא שבדיקות לאחר-תנאי מאשרות כי הפעולות שהושלמו השיגו את האפקטים המתוכננים ללא תופעות לוואי; אי-התאמות יגרמו להחזרה למצב הקודם. |  2  |   V   |
| 9.9.4 | ודא ששיטות פורמליות (למשל בדיקת מודל, הוכחת משפטים) או בדיקות לפי תכונות מדגימות כי תוכניות הסוכן עומדות בכל ההגבלות שנקבעו.    |  3  |   V   |
| 9.9.5 | ודא כי אירועי intent-mismatch או constraint-violation מזינים מחזורי שיפור מתמשך ושיתוף threat-intel.                            |  3  |   D   |

---

## 9.10 אסטרטגיית ההיגיון של הסוכן ואבטחה

בחירה וביצוע מאובטחים של אסטרטגיות הסקה שונות, כולל גישות ReAct, Chain-of-Thought, ו-Tree-of-Thoughts.

|   #    | תיאור                                                                                                                                                                              | רמה | תפקיד |
| :----: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 9.10.1 | ודא כי בחירת אסטרטגיית ההסקה משתמשת בקריטריונים דטרמיניסטיים (מורכבות הקלט, סוג המשימה, הקשר אבטחתי), וכי קלטים זהים מייצרים בחירות זהות של אסטרטגיית ההסקה בתוך אותו הקשר אבטחתי. |  1  |  D/V  |
| 9.10.2 | ודא שלכל אסטרטגיית ההיגיון (ReAct, Chain-of-Thought, Tree-of-Thoughts) יש אימות קלט ייעודי, סינון פלט, ומגבלות זמן הרצה המתאימות לגישתה הקוגניטיבית.                               |  1  |  D/V  |
| 9.10.3 | ודא כי המעברים בין אסטרטגיות הסקה נרשמים עם הקשר המלא הכולל מאפייני הקלט, ערכי קריטריוני הבחירה ואת מטא-נתוני הביצוע לשחזור מסלול הביקורת.                                         |  2  |  D/V  |
| 9.10.4 | ודא שההיגיון של Tree-of-Thoughts כולל מנגנוני קצוץ ענפים אשר מפסיקים את תהליך החקירה כאשר מזוהות הפרות מדיניות, מגבלות משאבים, או גבולות בטיחות.                                   |  2  |  D/V  |
| 9.10.5 | ודא שמחזורי ReAct (Reason-Act-Observe) כוללים נקודות ביקורת אימות בכל שלב: אימות שלב ההיגיון, אישור פעולה, וסינון התצפיות לפני ההמשך.                                              |  2  |  D/V  |
| 9.10.6 | ודא שמדדי הביצועים של אסטרטגיית ההסקה (זמן הביצוע, שימוש במשאבים, איכות הפלט) מנוטרים באמצעות התראות אוטומטיות כאשר המדדים חורגים מעבר לספים שהוגדרו.                              |  3  |  D/V  |
| 9.10.7 | ודא שגישות חשיבה היברידיות המשולבות מספר אסטרטגיות שומרות על אימות הקלט ועל מגבלות הפלט של כל האסטרטגיות המרכיבות אותן, ללא דילוג על אף בקרות האבטחה.                              |  3  |  D/V  |
| 9.10.8 | ודא כי בדיקות אבטחת אסטרטגיית ההסקה כוללות פאזינג עם קלטים פגומים, פרומפטים עוינים שנועדו לאלץ החלפת אסטרטגיה, ובדיקות תנאי גבול לכל גישה קוגניטיבית.                              |  3  |  D/V  |

---

## 9.11 מחזור החיים של הסוכן: ניהול מצב ואבטחה

אתחול מאובטח של הסוכן, מעברי מצב וסיום, עם נתיבי ביקורת קריפטוגרפיים ונהלי התאוששות מוגדרים.

|   #    | תיאור                                                                                                                                                                                                   | רמה | תפקיד |
| :----: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 9.11.1 | ודא כי אתחול הסוכן כולל הקמה של זהות קריפטוגרפית עם אישורי חומרה ויומני ביקורת אתחול בלתי ניתנים לשינוי המכילים את מזהה הסוכן, חותמת זמן, hash של התצורה ופרמטרי אתחול.                                 |  1  |  D/V  |
| 9.11.2 | ודא שהמעברים בין מצבי הסוכן חתומים בצורה קריפטוגרפית, מסומנים עם חותמת זמן, ומתועדים בהקשר מלא כולל אירועים המפעילים, hash של המצב הקודם, hash של המצב החדש, ואימותי אבטחה שבוצעו.                      |  2  |  D/V  |
| 9.11.3 | ודא שנהלי כיבוי הסוכן כוללים מחיקת זיכרון מאובטחת באמצעות מחיקה קריפטוגרפית או כתיבה במספר מעברים, ביטול אסמכתאות עם הודעה לסמכות התעודות, ויצירת תעודות סיום שמבטיחות גילוי שינויים.                   |  2  |  D/V  |
| 9.11.4 | ודא שמנגנוני ההתאוששות של הסוכן מאמתים את שלמות המצב באמצעות סכומי אימות קריפטוגרפיים (לפחות SHA-256), ובמקרה שזוהה שיבוש הם מבצעים שחזור למצבים תקינים ידועים, עם התראות אוטומטיות ודרישות אישור ידני. |  3  |  D/V  |
| 9.11.5 | ודא כי מנגנוני שמירת מצב של כל סוכן מצפינים נתוני מצב רגישים באמצעות מפתחות AES-256 לכל סוכן, ומיישמים החלפת מפתחות מאובטחת על לוחות זמנים הניתנים להגדרה (מקסימום 90 ימים) עם פריסה ללא זמן השבתה.     |  3  |  D/V  |

---

## 9.12 מסגרת אבטחה לשילוב כלים

בקרות אבטחה עבור טעינת כלים דינמית, הרצה, ואימות תוצאות עם תהליכי הערכה ואישור סיכונים מוגדרים.

|   #    | תיאור                                                                                                                                                                                              | רמה | תפקיד |
| :----: | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 9.12.1 | ודא כי מתארי כלים כוללים מטא-נתוני אבטחה המפרטים זכויות גישה נדרשות (קריאה/כתיבה/הרצה), רמות סיכון (נמוך/בינוני/גבוה), מגבלות משאבים (CPU, זיכרון, רשת), ודרישות אימות המתועדות במניפסטים של כלים. |  1  |  D/V  |
| 9.12.2 | ודא שהתוצאות של הרצת הכלים מאומתות כנגד הסכמות הצפויות (JSON Schema, XML Schema) ולמדיניות אבטחה (סינון פלט, סיווג נתונים) לפני אינטגרציה עם מגבלות זמן ונהלי טיפול בשגיאות.                       |  1  |  D/V  |
| 9.12.3 | ודא כי יומני אינטראקציית כלים כוללים הקשר אבטחתי מפורט, כולל שימוש בהרשאות, דפוסי גישת נתונים, זמן ביצוע, צריכת משאבים וקודי החזרה, עם רישום מובנה לאינטגרציה עם SIEM.                             |  2  |  D/V  |
| 9.12.4 | ודא שמנגנוני טעינת כלים דינמיים מאמתים חתימות דיגיטליות באמצעות תשתית PKI, ויישם פרוטוקולי טעינה מאובטחים עם בידוד בסנדבוקס ואימות הרשאות לפני ההרצה.                                              |  2  |  D/V  |
| 9.12.5 | ודא כי הערכות אבטחת כלים מופעלות אוטומטית עבור גרסאות חדשות עם שערי אישור חובה הכוללים ניתוח סטטי, בדיקות דינמיות וסקירת צוות האבטחה עם קריטריוני אישור מתועדים ודרישות SLA.                       |  3  |  D/V  |

---

### הפניות

* [MITRE ATLAS tactics ML09](https://atlas.mitre.org/)
* [Circuit-breaker research for AI agents — Zou et al., 2024](https://arxiv.org/abs/2406.04313)
* [Trend Micro analysis of sandbox escapes in AI agents — Park, 2025](https://www.trendmicro.com/vinfo/us/security/news/cybercrime-and-digital-threats/unveiling-ai-agent-vulnerabilities-code-execution)
* [Auth0 guidance on human-in-the-loop authorization for agents — Martinez, 2025](https://auth0.com/blog/secure-human-in-the-loop-interactions-for-ai-agents/)
* [Medium deep-dive on MCP & A2A protocol hijacking — ForAISec, 2025](https://medium.com/%40foraisec/security-analysis-potential-ai-agent-hijacking-via-mcp-and-a2a-protocol-insights-cd1ec5e6045f)
* [Rapid7 fundamentals on spoofing attack prevention — 2024](https://www.rapid7.com/fundamentals/spoofing-attacks/)
* [Imperial College verification of swarm systems — Lomuscio et al.](https://sail.doc.ic.ac.uk/projects/swarms/)
* [NIST AI Risk Management Framework 1.0, 2023](https://nvlpubs.nist.gov/nistpubs/ai/nist.ai.100-1.pdf)
* [WIRED security briefing on encryption best practices, 2024](https://www.wired.com/story/encryption-apps-chinese-telecom-hacking-hydra-russia-exxon)
* [OWASP Top 10 for LLM Applications, 2025](https://owasp.org/www-project-top-10-for-large-language-model-applications/)
* [Comprehensive Vulnerability Analysis is Necessary for Trustworthy LLM-MAS](https://arxiv.org/html/2506.01245v1)
* [How Is LLM Reasoning Distracted by Irrelevant Context?
  An Analysis Using a Controlled Benchmark](https://www.arxiv.org/pdf/2505.18761)
* [Large Language Model Sentinel: LLM Agent for Adversarial Purification](https://arxiv.org/pdf/2405.20770)
* [Securing Agentic AI: A Comprehensive Threat Model and Mitigation Framework for Generative AI Agents](https://arxiv.org/html/2504.19956v2)

