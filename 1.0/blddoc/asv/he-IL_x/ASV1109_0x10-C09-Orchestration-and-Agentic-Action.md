# 9 ארכיטקטורת קואורדינציה אוטונומית ופעולה סוכנית אבטחה

## מטרת הבקרה

יש להבטיח שמערכות בינה מלאכותית אוטונומיות או רב-סוכניות יכולות לבצע רק פעולות שהן במפורש מיועדות, מאומתות, ניתנות לבדיקה ובתחומי עלויות וסיכונים מוגדרים. זה מגן מפני איומים כגון פגיעה במערכת אוטונומית, שימוש לרעה בכלים, גילוי לולאות סוכן, חטיפת תקשורת, זיוף זהות, מניפולציה על להקות ומניפולציה בכוונות.

---

## 9.1 תקציבי תכנון משימות סוכן ורקורסיה

הגבל תכניות רקורסיביות וכפה נקודות ביקורת אנושיות לפעולות מועדפות.

|   #   | תיאור                                                                                                                               | רָמָה | תפקיד |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------- | :---: | :---: |
| 9.1.1 | אמת שעמק הרקורסיה המקסימלי, הרוחב, זמן השעון הקיר, מספר הטוקנים, ועלות כספית לכל הרצת סוכן מוגדרים באופן מרכזי ונשלטים בגרסאות.     |   1   |  D/V  |
| 9.1.2 | אמת כי פעולות בלעדיות או בלתי הפיכות (כגון, מחויבות קוד, העברות כספיות) דורשות אישור מפורש של אדם דרך ערוץ הניתן לבדיקה לפני ביצוע. |   1   |  D/V  |
| 9.1.3 | וודא שמנטרי משאבים בזמן אמת מפעילים הפסקת מעגל (circuit-breaker) כאשר כל סף תקציב נחשב כמופרז, ומפסיקים הרחבת משימות נוספות.        |   2   |   D   |
| 9.1.4 | אשר כי אירועי מפסק מעגל מתועדים עם מזהה הסוכן, תנאי ההפעלה, ומצב התכנית שנתפס לסקירה משפטית.                                        |   2   |  D/V  |
| 9.1.5 | אשר כי מבחני האבטחה מכסים תרחישי מיצוי תקציב ותוכניות מדיוניות, ומאשרים עצירה בטוחה ללא אובדן נתונים.                               |   3   |   V   |
| 9.1.6 | אמת שהמדיניות התקציבית מוצגת כמדיניות-כקוד ומיושמת ב-CI/CD כדי למנוע סטייה מהגדרות.                                                 |   3   |   D   |

---

## 9.2 סאנדבוקסינג של תוסף כלים

לבודד אינטראקציות עם הכלי כדי למנוע גישה בלתי מורשית למערכת או ביצוע קוד.

|   #   | תיאור                                                                                                                                        | רָמָה | תפקיד |
| :---: | -------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :---: |
| 9.2.1 | אמת שכל כלי/הרחבה פועלים בתוך מערכת הפעלה, מכולה, או סביבת סנדבוקס ברמת WASM עם מדיניות הרשאות מינימליות למערכת הקבצים, לרשת ולקריאות מערכת. |   1   |  D/V  |
| 9.2.2 | וודא כי הקצאות המשאבים של הסנדבוקס (CPU, זיכרון, דיסק, יציאת רשת) וזמני ההפעלה מוגבלים ומנוטרים ביומן.                                       |   1   |  D/V  |
| 9.2.3 | אמת שהקבצים הבינריים של הכלים או התיאורים חתומים דיגיטלית; החתימות מאומתות לפני הטעינה.                                                      |   2   |  D/V  |
| 9.2.4 | אשר כי זרמי טלמטריה של סנדבוקס משודרים ל-SIEM; סטיות מהנורמה (למשל, ניסיונות יצירת חיבורים יוצאים) מעוררות התראות.                           |   2   |   V   |
| 9.2.5 | וודא שתוספים בסיכון גבוה עוברים סקירת אבטחה ובדיקות חדירה לפני פריסת מוצר.                                                                   |   3   |   V   |
| 9.2.6 | וודא שניסיונות לבריחת סנדבוקס נחסמים אוטומטית ותוסף המפר פושט בידוד למטרות חקירה.                                                            |   3   |  D/V  |

---

## 9.3 לולאה אוטונומית והגבלת עלויות

לזהות ולעצור רקורסיה בלתי נשלטת ממסר למסר והתפוצצויות עלויות.

|   #   | תיאור                                                                                                      | רָמָה | תפקיד |
| :---: | ---------------------------------------------------------------------------------------------------------- | :---: | :---: |
| 9.3.1 | אמת כי קריאות בין-סוכנים כוללות מגבלת היתקעות או זמן חיים (TTL) שהסביבת ההרצה מפחיתה ומאכפת.               |   1   |  D/V  |
| 9.3.2 | אמתו כי סוכנים שומרים על מזהה גרף-קריאה ייחודי כדי לזהות קריאה עצמית או דפוסים מחזוריים.                   |   2   |   D   |
| 9.3.3 | אמת כי מוני היחידות החישוביות וההוצאה המצטברת מנוטרים עבור כל שרשרת בקשות; חריגה מהמגבלה מפסיקה את השרשרת. |   2   |  D/V  |
| 9.3.4 | אשר כי ניתוח פורמלי או בדיקת מודל מראים היעדר רקורסיה בלתי מוגבלת בפרוטוקולים של סוכנים.                   |   3   |   V   |
| 9.3.5 | אמת שאירועי עצירת הלולאה מייצרים התראות ומזינים מדדי שיפור מתמשך.                                          |   3   |   D   |

---

## 9.4 הגנת ניצול לרעה ברמת הפרוטוקול

ערוצים מאובטחים לתקשורת בין סוכנים למערכות חיצוניות כדי למנוע השתלטות או מניפולציה.

|   #   | תיאור                                                                                                    | רָמָה | תפקיד |
| :---: | -------------------------------------------------------------------------------------------------------- | :---: | :---: |
| 9.4.1 | אמת שכל ההודעות בין סוכן לכלי והודעות בין סוכן לסוכן מאומתות (למשל, TLS הדדי או JWT) ומוצפנות מקצה לקצה. |   1   |  D/V  |
| 9.4.2 | וודא שהסכימות מאומתות בקפדנות; שדות לא מוכרים או הודעות מעוותות נדחות.                                   |   1   |   D   |
| 9.4.3 | אמת שהבדיקות שלמות (MACים או חתימות דיגיטליות) מכסות את כל מטען ההודעה כולל פרמטרי הכלי.                 |   2   |  D/V  |
| 9.4.4 | אמת כי מניעת השמעה חוזרת (nonces או חלונות חותמות זמן) נאכפת ברמת הפרוטוקול.                             |   2   |   D   |
| 9.4.5 | וודא שיישומי הפרוטוקול עוברים בדיקת פאזינג וניתוח סטטי לזיהוי פגמים של הזרקה או פירוק סידור מחדש.        |   3   |   V   |

---

## 9.5 זהות הסוכן והוכחה למניעת זיופים

ודא שהפעולות משתייכות ושהשינויים ניתנים לזיהוי.

|   #   | תיאור                                                                                           | רָמָה | תפקיד |
| :---: | ----------------------------------------------------------------------------------------------- | :---: | :---: |
| 9.5.1 | אמת שכל מופע סוכן מחזיק בזהות קריפטוגרפית ייחודית (זוג מפתחות או אישור מבוסס חומרה).            |   1   |  D/V  |
| 9.5.2 | אמת שכל פעולות הסוכן חתומות וכוללות חותמת זמן; היומנים כוללים את החתימה לצורך אי-התכחשות.       |   2   |  D/V  |
| 9.5.3 | אמת שהיומנים העמידים לשינוי מאוחסנים במדיה שאפשר להוסיף אליה בלבד או שכותבים אליה פעם אחת בלבד. |   2   |   V   |
| 9.5.4 | וודא שמפתחות זהות מסתובבים בלוח זמנים מוגדר ובאינדיקטורים של פריצה.                             |   3   |   D   |
| 9.5.5 | אמת שנסיונות זיוף או קונפליקט מפתחות מפעילים בידוד מיידי של הסוכן המושפע.                       |   3   |  D/V  |

---

## 9.6 הפחתת סיכון בעזרת רשת סוכנים מרובה

למזער סיכוני התנהגות קולקטיבית באמצעות בידוד ומודלים פורמליים של בטיחות.

|   #   | תיאור                                                                                                       | רָמָה | תפקיד |
| :---: | ----------------------------------------------------------------------------------------------------------- | :---: | :---: |
| 9.6.1 | אמת כי סוכנים הפועלים בדומיינים בטחוניים שונים מופעלים בסביבות הרצה מבודדות או מקטעי רשת מבודדים.           |   1   |  D/V  |
| 9.6.2 | אשר כי התנהגויות העדר מודללות ומאומתות פורמלית לגבי חיוניות ובטיחות לפני הפריסה.                            |   3   |   V   |
| 9.6.3 | וודא שמנטרי זמן ריצה מזהים דפוסים לא בטוחים המתעוררים (למשל, תנודות, עצירות תהליכים) ומתחילים בפעולה מתקנת. |   3   |   D   |

---

## 9.7 אימות משתמש וכלי / הרשאה

יישם בקרות גישה חזקות עבור כל פעולה שמפעיל סוכן.

|   #   | תיאור                                                                                                           | רָמָה | תפקיד |
| :---: | --------------------------------------------------------------------------------------------------------------- | :---: | :---: |
| 9.7.1 | אמת שזואי האג'נטים מתבצעת בתור פרינסיפלים מדרגה ראשונה מול מערכות המשנה, מבלי להשתמש מחדש באישורי המשתמש הסופי. |   1   |  D/V  |
| 9.7.2 | אמת כי מדיניות הרשאות מפורטת מגבילה אילו כלים סוכן עשוי להפעיל ואילו פרמטרים הוא עשוי לספק.                     |   2   |   D   |
| 9.7.3 | אמת ששלבי בדיקת ההרשאות מתבצעים מחדש בכל קריאה (אישור רציף), ולא רק בתחילת הסשן.                                |   2   |   V   |
| 9.7.4 | אמת ששליחות ההרשאות מסתיימת אוטומטית ודורשת הסכמה מחודשת לאחר פקיעת הזמן או שינוי הטווח.                        |   3   |   D   |

---

## 9.8 אבטחת תקשורת בין סוכנים

הצפן והגן על השלמות של כל הודעות בין סוכנים כדי למנוע האזנה זדונית וגניבת מידע.

|   #   | תיאור                                                                                                       | רָמָה | תפקיד |
| :---: | ----------------------------------------------------------------------------------------------------------- | :---: | :---: |
| 9.8.1 | אשר כי אימות הדדי והצפנת סוד מושלם קדימה (למשל TLS 1.3) הם חובה עבור ערוצי הסוכן.                           |   1   |  D/V  |
| 9.8.2 | אמת כי שלום ושלמות ההודעה מקורם מאומתים לפני העיבוד; כשלים גורמים להתרעות ולדחיית ההודעה.                   |   1   |   D   |
| 9.8.3 | אמת שהמטא-דאטה של התקשורת (חותמות זמן, מספרי רצף) מתועדת כדי לתמוך בשחזור פורנזי.                           |   2   |  D/V  |
| 9.8.4 | אמת כי אימות פורמלי או ביקורת מודלים מאשרים שמכונות מצב של הפרוטוקול אינן יכולות להיות מונעות למצב לא בטוח. |   3   |   V   |

---

## 9.9 אימות כוונה ואכיפת מגבלות

לאמת כי פעולות הסוכן תואמות את הכוונה המוצהרת של המשתמש ואת המגבלות המערכתיות.

|   #   | תיאור                                                                                                                                    | רָמָה | תפקיד |
| :---: | ---------------------------------------------------------------------------------------------------------------------------------------- | :---: | :---: |
| 9.9.1 | אמתו שמפענחי אילוצים לפני ביצוע בודקים את הפעולות המוצעות מול כללי בטיחות ומדיניות שהוגדרו בקוד.                                         |   1   |   D   |
| 9.9.2 | אמת כי פעולות בעלות השפעה גבוהה (פיננסית, הרסנית, רגישות לפרטיות) דורשות אישור מפורש של כוונה מהמשתמש היוזם.                             |   2   |  D/V  |
| 9.9.3 | ודא שהבדיקות אחרי-המצב מאמתות שהפעולות שהושלמו השיגו את התוצאות הרצויות ללא השפעות לוואי; סטיות גורמות להחזרת המצב לאחור.                |   2   |   V   |
| 9.9.4 | וודא כי שיטות פורמליות (למשל, בדיקת מודלים, הוכחת תיאורמות) או בדיקות מבוססות תכונות מראות כי תוכניות הסוכן עומדות בכל המגבלות המוצהרות. |   3   |   V   |
| 9.9.5 | אמת כי תקריות של חוסר התאמה בכוונה או הפרת הגבלות מזינות מחזורי שיפור מתמיד ושיתוף מודיעין איומים.                                       |   3   |   D   |

---

## 9.10 אבטחת אסטרטגיית הסקת המסקנות של הסוכן

בחירה וביצוע מאובטחים של אסטרטגיות הסקה שונות כולל גישות ReAct, Chain-of-Thought ו-Tree-of-Thoughts.

|   #    | תיאור                                                                                                                                                                       | רָמָה | תפקיד |
| :----: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :---: |
| 9.10.1 | וודא כי בחירת אסטרטגיית החשיבה משתמשת בקריטריונים דטרמיניסטיים (מורכבות הקלט, סוג המשימה, הקשר אבטחה) ושהקלטים זהים מייצרים בחירות אסטרטגיה זהות בתוך אותו הקשר אבטחה.      |   1   |  D/V  |
| 9.10.2 | אמת שכל אסטרטגיית חשיבה (ReAct, Chain-of-Thought, Tree-of-Thoughts) כוללת ולידציה ייעודית לקלט, סניטיזציה של הפלט, ומגבלות זמן ביצוע המותאמות לגישה הקוגניטיבית שלה.        |   1   |  D/V  |
| 9.10.3 | וודא כי מעברי אסטרטגיית ההסקת מסקנות מתועדים עם הקשר מלא הכולל מאפייני הקלט, ערכי הקריטריונים לבחירה, ומטא-נתוני ביצוע לצורך שיחזור מסלול ביקורת.                           |   2   |  D/V  |
| 9.10.4 | אמת כי קבלת ההחלטות במבנה עץ-of-Thoughts כוללת מנגנוני קיצוץ ענפים שמפסיקים את החקירה כאשר מתגלות הפרות של מדיניות, מגבלות משאבים, או גבולות בטיחות.                        |   2   |  D/V  |
| 9.10.5 | אמת שדיקות ReAct (Reason-Act-Observe) כוללות נקודות אימות בכל שלב: אימות שלב ההסקה, אישור הפעולה, וניקוי התצפית לפני ההתקדמות.                                              |   2   |  D/V  |
| 9.10.6 | וודא שמדדי ביצוע של אסטרטגיית ההסקת מסקנות (זמן ביצוע, שימוש במשאבים, איכות הפלט) מנוטרים עם התראות אוטומטיות כאשר המדדים חורגים מהספים שהוגדרו.                            |   3   |  D/V  |
| 9.10.7 | אמת כי גישות חשיבה משולבות שמשלבות אסטרטגיות מרובות שומרות על אימות קלט ומגבלות פלט של כל האסטרטגיות המרכיבות מבלי לעקוף שום בקרות אבטחה.                                   |   3   |  D/V  |
| 9.10.8 | אמת כי בדיקות אבטחת אסטרטגיית ההסקת מסקנות כוללות טשטוש (fuzzing) עם קלטים מעוותים, פרומפטים עוינים המיועדים לאלץ מעבר בין אסטרטגיות, ובדיקת תנאי גבול לכל גישה קוגניטיבית. |   3   |  D/V  |

---

## 9.11 ניהול מצב מחזור חיים של סוכן ואבטחה

אתחול סוכן מאובטח, מעבר מצבים וסיום עם מעקבי ביקורת קריפטוגרפיים ונהלי שחזור מוגדרים.

|   #    | תיאור                                                                                                                                                                                                     | רָמָה | תפקיד |
| :----: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :---: |
| 9.11.1 | אמת כי אתחול הסוכן כולל הקמת זהות קריפטוגרפית עם אישורים מגובים בחומרה ויומני ביקורת אתחול בלתי משתנים הכוללים מזהה הסוכן, חותמת זמן, גיבוב תצורה, ופרמטרי אתחול.                                         |   1   |  D/V  |
| 9.11.2 | ודאו שמעברי מצב של הסוכן חתומים קריפטוגרפית, מתועדכים עם חותמת זמן, ומתועדים ביומן עם הקשר מלא הכולל אירועים שהפעילו את המעבר, גיבוב המצב הקודם, גיבוב המצב החדש, ואימותי אבטחה שבוצעו.                   |   2   |  D/V  |
| 9.11.3 | וידא כי נוהלי כיבוי הסוכן כוללים מחיקה מאובטחת של הזיכרון באמצעות מחיקה קריפטוגרפית או כתיבה חוזרת מרובה-מעברים, ביטול אישורי גישה עם הודעה לרשות התעודות, ויצירת תעודות סיום המראות סימני פגיעה.         |   2   |  D/V  |
| 9.11.4 | אמת כי מנגנוני ההתאוששות של הסוכן מאמתים את שלימות המצב באמצעות סכומים ביקורתיים קריפטוגרפיים (מינימום SHA-256) ומבצעים חזרה למצב תקין ידוע כאשר מתגלה קורוטציה, עם התראות אוטומטיות ודרישות לאישור ידני. |   3   |  D/V  |
| 9.11.5 | אמת כי מנגנוני ההתמדה של הסוכן מוצפנים באמצעות מפתחות AES-256 ייחודיים לכל סוכן ומיישמים סיבוב מפתחות מאובטח בלוחות זמנים שניתנים לקונפיגורציה (מקסימום 90 יום) עם פריסה ללא השבתה.                       |   3   |  D/V  |

---

## 9.12 מסגרת אבטחת אינטגרציית כלים

בקרות אבטחה לטעינה דינמית של כלים, ביצועם ואימות התוצאות עם תהליכים מוגדרים להערכת סיכונים ואישור.

|   #    | תיאור                                                                                                                                                                                              | רָמָה | תפקיד |
| :----: | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---: | :---: |
| 9.12.1 | אמת שהתיאורים של הכלים כוללים מטא-דאטה אבטחה שמפרטת הרשאות נדרשות (קריאה/כתיבה/הפעלה), רמות סיכון (נמוך/בינוני/גבוה), מגבלות משאבים (CPU, זיכרון, רשת), ודרישות אימות שמתועדות במניפסטים של הכלים. |   1   |  D/V  |
| 9.12.2 | אמת תוצאות ביצוע הכלי מול סכימות צפויות (JSON Schema, XML Schema) ומדיניות אבטחה (ניקוי פלט, סיווג נתונים) לפני שילוב, עם הגבלת זמן טיפול ופרוצדורות טיפול בשגיאות.                                |   1   |  D/V  |
| 9.12.3 | וודא שלוגי אינטראקציה עם כלי כוללים הקשר אבטחה מפורט הכולל שימוש בהרשאות, דפוסי גישה לנתונים, זמן ביצוע, צריכת משאבים וקודי החזרה עם רישום מובנה למטרת אינטגרציה עם SIEM.                          |   2   |  D/V  |
| 9.12.4 | אמת שלמנגנוני טעינת כלים דינמיים יש ולידציה של חתימות דיגיטליות באמצעות תשתית PKI ומיישמים פרוטוקולי טעינה מאובטחים עם בידוד בסביבה מבודדת (sandbox) ואימות הרשאות לפני ביצוע.                     |   2   |  D/V  |
| 9.12.5 | וודאו שהערכת אבטחת הכלים מופעלת אוטומטית עבור גרסאות חדשות עם שערי אישור מחייבים הכוללים ניתוח סטטי, בדיקות דינמיות, ובחינת צוות האבטחה עם קריטריוני אישור מתועדים ודרישות SLA.                    |   3   |  D/V  |

---

### ביבליוגרפיה

* [MITRE ATLAS tactics ML09](https://atlas.mitre.org/)
* [Circuit-breaker research for AI agents — Zou et al., 2024](https://arxiv.org/abs/2406.04313)
* [Trend Micro analysis of sandbox escapes in AI agents — Park, 2025](https://www.trendmicro.com/vinfo/us/security/news/cybercrime-and-digital-threats/unveiling-ai-agent-vulnerabilities-code-execution)
* [Auth0 guidance on human-in-the-loop authorization for agents — Martinez, 2025](https://auth0.com/blog/secure-human-in-the-loop-interactions-for-ai-agents/)
* [Medium deep-dive on MCP & A2A protocol hijacking — ForAISec, 2025](https://medium.com/%40foraisec/security-analysis-potential-ai-agent-hijacking-via-mcp-and-a2a-protocol-insights-cd1ec5e6045f)
* [Rapid7 fundamentals on spoofing attack prevention — 2024](https://www.rapid7.com/fundamentals/spoofing-attacks/)
* [Imperial College verification of swarm systems — Lomuscio et al.](https://sail.doc.ic.ac.uk/projects/swarms/)
* [NIST AI Risk Management Framework 1.0, 2023](https://nvlpubs.nist.gov/nistpubs/ai/nist.ai.100-1.pdf)
* [WIRED security briefing on encryption best practices, 2024](https://www.wired.com/story/encryption-apps-chinese-telecom-hacking-hydra-russia-exxon)
* [OWASP Top 10 for LLM Applications, 2025](https://owasp.org/www-project-top-10-for-large-language-model-applications/)
* [Comprehensive Vulnerability Analysis is Necessary for Trustworthy LLM-MAS](https://arxiv.org/html/2506.01245v1)
* [How Is LLM Reasoning Distracted by Irrelevant Context?
  An Analysis Using a Controlled Benchmark](https://www.arxiv.org/pdf/2505.18761)
* [Large Language Model Sentinel: LLM Agent for Adversarial Purification](https://arxiv.org/pdf/2405.20770)
* [Securing Agentic AI: A Comprehensive Threat Model and Mitigation Framework for Generative AI Agents](https://arxiv.org/html/2504.19956v2)

