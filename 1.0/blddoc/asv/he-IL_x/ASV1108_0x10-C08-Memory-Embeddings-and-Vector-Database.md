# אבטחת זיכרון C8, הטמעות ומסד נתונים וקטורי

## מטרת בקרה

הטמעות וחנויות וקטור פועלות כ"זיכרון חי" של מערכות AI עכשוויות, מקבלות כל העת נתונים שמספק המשתמש ומחזירות אותם להקשרים במודל באמצעות יצירה מואצת משחזורים (Retrieval-Augmented Generation - RAG). אם לא ינוהלו כראוי, זיכרון זה עלול לדלוף מידע אישי מזהה (PII), להפר את ההסכמה או לשמש לשחזור הטקסט המקורי. המטרה של משפחת הבקרה הזו היא לחזק את צינורות הזיכרון ומסדי הנתונים הוקטוריים כך שהגישה תהיה במינימום זכויות, ההטמעות ישמרו על פרטיות, הוקטורים המאוחסנים תפוג תוקפם או יוכלו להיות מבוטלים לפי דרישה, והזיכרון של כל משתמש לא יזהם את ההנחיות או ההשלמות של משתמש אחר.

---

## C8.1 בקרות גישה על זיכרון ואינדקסים של RAG

לאכוף בקרות גישה מדויקות על כל אוסף וקטורים.

|   #   | תיאור                                                                                                                   | רמה | תפקיד |
| :---: | ----------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 8.1.1 | אמת שכללי בקרת גישה ברמת שורה/מרחב שמות מגבילים פעולות הוספה, מחיקה ושאילתה בהתאם לשוכר, לאוסף או לתג המסמך.            |  1  |  D/V  |
| 8.1.2 | ודא שמפתחות API או JWT נושאים טענות מותאמות היקף (למשל, מזהי אוספים, פעלים של פעולות) ומוחלפים לפחות אחת לרבעון.        |  1  |  D/V  |
| 8.1.3 | וודא שניסיונות להעלאת הרשאות (למשל, שאילתות דמיון חוצות-מרחבי-שמות) מזוהים ונרשמים ב-SIEM תוך 5 דקות.                   |  2  |  D/V  |
| 8.1.4 | וודא כי מסד הנתונים הווקטוריים רושם יומני ביקורת הכוללים מזהה נושא, פעולה, מזהה וקטור/מרחב שמות, סף דמיון ומספר תוצאות. |  2  |  D/V  |
| 8.1.5 | וודא שהחלטות גישה נבדקות עבור ליקויי עקיפה כל אימת שמנועים מתעדכנים או חוקי שיבוץ האינדקס משתנים.                       |  3  |   V   |

---

## C8.2 ניקוי ואימות הטמעה

לסרוק טקסט מראש לזיהוי מידע אישי מזהה (PII), לטשטש או לפסאודונימיזציה לפני הוקטוריזציה, ואפשרות לעבד את ההטמעות לאחר מכן כדי להסיר אותות שאריות.

|   #   | תיאור                                                                                                                                                 | רמה | תפקיד |
| :---: | ----------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 8.2.1 | אמתו ש-PII ונתונים מפוקחים מזוהים באמצעות מסווגים אוטומטיים ומוסתרים, מומסרקים, או מושמטים לפני ההטמעה.                                               |  1  |  D/V  |
| 8.2.2 | וודא כי צינורות ההטמעה דוחים או מכניסים לבידוד קלטים המכילים קוד ביצועי או ארטיפקטים שאינם בפורמט UTF-8 העלולים להרוס את האינדקס.                     |  1  |   D   |
| 8.2.3 | אמת כי יש יישום של סניטיזציה של פרטיות דיפרנציאלית מקומית או מטרית על אמבדינגים של משפטים שהמרחק שלהם לכל אסימון PII ידוע נופל מתחת לסף שניתן להגדיר. |  2  |  D/V  |
| 8.2.4 | יש לאמת את יעילות הסניטציה (למשל, אחזור הסרה של מידע מזהה אישי, סטייה סמנטית) לפחות פעמיים בשנה על בסיס קורפוסים תקניים.                              |  2  |   V   |
| 8.2.5 | אמת כי קונפיגורציות הניקוי מנוהלות בשליטה בגרסאות והשינויים עוברים סקירה על ידי עמיתים.                                                               |  3  |  D/V  |

---

## C8.3 תפוגת זיכרון, ביטול והסרה

חוק GDPR של "הזכות להישכח" וחוקים דומים מחייבים מחיקה מיידית; לכן מאגרי וקטורים חייבים לתמוך ב-TTL, מחיקות קשוחות, וסימון כמוסבר (tomb-stoning) כך שווקטורים שבוטלו לא יוכלו להיות משוחזרים או מאונדקסים מחדש.

|   #   | תיאור                                                                                                                      | רמה | תפקיד |
| :---: | -------------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 8.3.1 | וודאו שכל וקטור וכל רשומת מטאדטה נושאים תווית TTL או תווית שמירת מידע מפורשת שמכובדת על ידי עבודות ניקוי אוטומטיות.        |  1  |  D/V  |
| 8.3.2 | וודא כי בקשות מחיקה המוזנות על ידי המשתמש מנקות את הווקטורים, המטא-דאטה, עותקי המטמון והאינדקסים הנגזרים בתוך 30 ימים.     |  1  |  D/V  |
| 8.3.3 | אמת שפעולות מחיקה לוגיות מלוות בפיצוץ קריפטוגרפי של בלוקי אחסון אם החומרה תומכת בכך, או בהשמדה של מפתח מאומת במאגר מפתחות. |  2  |   D   |
| 8.3.4 | וודא שהווקטורים שפג תוקפם אינם כלולים בתוצאות החיפוש של השכנים הקרובים תוך פחות מ-500 מילישניות לאחר פקיעת התוקף.          |  3  |  D/V  |

---

## C8.4 מניעת הפיכת הטמעה ודליפה

הגנות אחרונות—סופרפוזיציית רעש, רשתות הקרנה, הפרעת נוירון לפרטיות, והצפנת שכבת היישום—יכולות להוריד את שיעורי ההפיכה ברמת הטוקן מתחת ל-5%.

|   #   | תיאור                                                                                                                   | רמה | תפקיד |
| :---: | ----------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 8.4.1 | אמת שקיים מודל איומים פורמלי הכולל התקפות של היפוך, חברות והסקת תכונות, וכי הוא נבדק מדי שנה.                           |  1  |   V   |
| 8.4.2 | וודא כי הצפנה בשכבת היישום או הצפנה ניתנת לחיפוש מגנה על וקטורים מקריאה ישירה על ידי מנהלי התשתית או צוותי הענן.        |  2  |  D/V  |
| 8.4.3 | אמת שהפרמטרים להגנה (ε עבור DP, רעש σ, דרגת ההקרנה k) מאזנים פרטיות ≥ 99% הגנה על טוקנים ושימור יעילות ≤ 3% אובדן דיוק. |  3  |   V   |
| 8.4.4 | אמת שהמדדים לעמידות כנגד היפוך הם חלק משערי השחרור לעדכוני המודל, עם תקציבי רגרסיה מוגדרים.                             |  3  |  D/V  |

---

## C8.5 אכיפת טווח עבור זיכרון ספציפי למשתמש

דליפה חוצה-שוכרים נשארת סיכון עיקרי ב-RAG: שאילתות דמיון מסוננות בצורה לקויה יכולות לחשוף מסמכים פרטיים של לקוח אחר.

|   #   | תיאור                                                                                                   | רמה | תפקיד |
| :---: | ------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 8.5.1 | וודא שכל שאילתת אחזור מסוננת לאחר מכן לפי מזהה שוכר/משתמש לפני שהיא מועברת לנושא של ה-LLM.              |  1  |  D/V  |
| 8.5.2 | אמת ששם האוספים או מזהי המרחב השם מתובלים לפי משתמש או שוכר כך שהוקטורים לא יתחברו בין תחומים.          |  1  |   D   |
| 8.5.3 | וודא כי תוצאות הדמיון שמעבר לסף מרחק שניתן להתאמה אך מחוץ לתחום של הקורא מתבטלות ומפעילות התראות אבטחה. |  2  |  D/V  |
| 8.5.4 | אמת כי מבחני עומס רב-שוכנים מדמים שאילתות תוקפניות המנסות לשלוף מסמכים מחוץ לתחום ותציגו אפס דליפה.     |  2  |   V   |
| 8.5.5 | אמת שהמפתחות להצפנה מופרדים לכל שוכר, תוך הבטחת בידוד קריפטוגרפי אפילו אם האחסון הפיזי משותף.           |  3  |  D/V  |

---

## C8.6 אבטחה מתקדמת של מערכת הזיכרון

בקרות אבטחה עבור ארכיטקטורות זיכרון מתקדמות הכוללות זיכרון אפיזודי, סמנטי ועובד עם דרישות בידוד ואימות ספציפיות.

|   #   | תיאור                                                                                                                                                                        | רמה | תפקיד |
| :---: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 8.6.1 | אמת כי לסוגים שונים של זיכרון (אפיזודי, סמנטי, עבודה) יש הקשרים של אבטחה מבודדים עם בקרות גישה מבוססות תפקידים, מפתחות הצפנה נפרדים, ודפוסי גישה מתועדים עבור כל סוג זיכרון. |  1  |  D/V  |
| 8.6.2 | וודא שתהליכי קונסולידציה של זיכרון כוללים אימות אבטחה למניעת הזרקת זיכרונות זדוניים באמצעות ניקוי תוכן, אימות מקור ובדיקות שלמות לפני האחסון.                                |  2  |  D/V  |
| 8.6.3 | אמת שהשאילתות לשחזור זיכרון מאותחלות ומנוקות כדי למנוע חילוץ מידע לא מאושר באמצעות ניתוח דפוסי השאילתות, אכיפת בקרת גישה וסינון התוצאות.                                     |  2  |  D/V  |
| 8.6.4 | אמתו שמנגנוני שכחת זיכרון מוחקים בצורה מאובטחת מידע רגיש עם ערבויות מחיקה קריפטוגרפית באמצעות מחיקת מפתח, כתיבה מרובה-מעברים או מחיקה מאובטחת מבוססת חומרה עם תעודות אימות.  |  3  |  D/V  |
| 8.6.5 | אמת כי שלמות מערכת הזיכרון מנוטרת ברציפות לשינויים לא מורשים או לשחיתות באמצעות סכומי ביקורת, יומני ביקורת והתראות אוטומטיות כאשר תוכן הזיכרון משתנה מחוץ לפעולות הרגילות.   |  3  |  D/V  |

---

## ביבליוגרפיה

* [Vector database security: Pinecone – IronCore Labs](https://ironcorelabs.com/vectordbs/pinecone-security/)
* [Securing the Backbone of AI: Safeguarding Vector Databases and Embeddings – Privacera](https://privacera.com/blog/securing-the-backbone-of-ai-safeguarding-vector-databases-and-embeddings/)
* [Enhancing Data Security with RBAC of Qdrant Vector Database – AI Advances](https://ai.gopubby.com/enhancing-data-security-with-role-based-access-control-of-qdrant-vector-database-3878769bec83)
* [Mitigating Privacy Risks in LLM Embeddings from Embedding Inversion – arXiv](https://arxiv.org/html/2411.05034v1)
* [DPPN: Detecting and Perturbing Privacy-Sensitive Neurons – OpenReview](https://openreview.net/forum?id=DF5TVzpTW0)
* [Art. 17 GDPR – Right to Erasure](https://gdpr-info.eu/art-17-gdpr/)
* [Sensitive Data in Text Embeddings Is Recoverable – Tonic.ai](https://www.tonic.ai/blog/sensitive-data-in-text-embeddings-is-recoverable)
* [PII Identification and Removal – NVIDIA NeMo Docs](https://docs.nvidia.com/nemo-framework/user-guide/latest/datacuration/personalidentifiableinformationidentificationandremoval.html)
* [De-identifying Sensitive Data – Google Cloud DLP](https://cloud.google.com/sensitive-data-protection/docs/deidentify-sensitive-data)
* [Remove PII from Conversations Using Sensitive Information Filters – AWS Bedrock Guardrails](https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails-sensitive-filters.html)
* [Think Your RAG Is Secure? Think Again – Medium](https://medium.com/%40vijay.poudel1/think-your-rag-is-secure-think-again-heres-how-to-actually-lock-it-down-c4c30e3864e7)
* [Design a Secure Multitenant RAG Inferencing Solution – Microsoft Learn](https://learn.microsoft.com/en-us/azure/architecture/ai-ml/guide/secure-multitenant-rag)
* [Best Practices for Multi-Tenancy RAG with Milvus – Milvus Blog](https://milvus.io/blog/build-multi-tenancy-rag-with-milvus-best-practices-part-one.md)

