# C8 זיכרון, הטמעות ואבטחת מסדי נתונים וקטוריים

## מטרת הבקרה

הטמעויות ואחסני וקטורים משמשים כ“זיכרון חי” של מערכות בינה מלאכותית עכשוויות, המקבלות ברציפות נתוני משתמש שמסופקים על ידי המשתמש ומשחזירות אותם בהקשרי המודל באמצעות הפקה מוגברת על ידי אחזור (RAG). אם יישארו ללא בקרה, זיכרון זה עלול להדליף מידע מזהה אישי (PII), להפר את ההסכמה, או להיות מופנה לשחזור הטקסט המקורי. מטרת מסגרת בקרת זו היא לחזק את מסלולי הזיכרון ואת מאגרי הווקטורים כך שהגישה תהיה על פי עקרון ההרשאה המזערית, שההטמעות יישמרו בפרטיות, שוקטורים מאוחסנים יפוגו או שניתן לבטל אותם לפי דרישה, ושהזיכרון לכל משתמש לא יזהם לעולם את ההנחיות או ההשלמות של משתמש אחר.

---

## C8.1 בקרות גישה על זיכרון ומדדי RAG

אכוף בקרת גישה מדויקת על כל אוסף וקטורים.

|   #   | תיאור                                                                                                                                   | רמה | תפקיד |
| :---: | --------------------------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 8.1.1 | ודא כי חוקי בקרת גישה ברמת שורה/מרחב שמות מגבילים את פעולות ההוספה, המחיקה ושאילתות לפי טננט, אוסף או תג מסמך.                          |  1  |  D/V  |
| 8.1.2 | ודא שמפתחות API או JWTs נושאים טענות עם תחומי גישה מוגדרים (למשל, מזהי אוסף, פעלים המתארים פעולה) ומוחלפים לכל הפחות אחת לשלושה חודשים. |  1  |  D/V  |
| 8.1.3 | ודא שניסיונות עליית הרשאות (למשל שאילתות דמיון בין-מרחבי-שמות) זוהו ותועדו ב-SIEM בתוך 5 דקות.                                          |  2  |  D/V  |
| 8.1.4 | ודא כי יומן ביקורת של בסיס הנתונים הווקטורי רושם את מזהה-הנושא, את הפעולה, את מזהה הווקטור/מרחב השמות, את סף הדמיון ואת ספירת התוצאות.  |  2  |  D/V  |
| 8.1.5 | ודא שהחלטות הגישה נבדקות כדי לזהות פגמים בדילוג בכל פעם שמנועים משודרגים או ששינוי בכללי חלוקת אינדקס מתבצע.                            |  3  |   V   |

---

## C8.2 הטמעה: סינון ואימות

סינון מראש של הטקסט עבור מידע מזהה אישי (PII), הסרה או פסאודונימיזציה לפני וקטוריזציה, ואפשרות לעבד את הייצוגים לאחר מכן כדי להסיר אותות שאריים.

|   #   | תיאור                                                                                                                                          | רמה | תפקיד |
| :---: | ---------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 8.2.1 | ודא/י כי PII ונתונים מפוקחים מזוהים באמצעות מסווגים אוטומטיים ומוסתרים, מטוקנייזדים, או נדחים לפני ההטמעה.                                     |  1  |  D/V  |
| 8.2.2 | ודא שצינורות ההטמעה דוחים או מבודדים קלטים המכילים קוד להפעלה או ארטיפקטים שאינם UTF-8 שיכולים לזהם את האינדקס.                                |  1  |   D   |
| 8.2.3 | ודא שיישום סינון פרטיות דיפרנציאלית מקומית או מד-פרטיות דיפרנציאלית מיושם על הטמעות משפטים כאשר המרחק לכל טוקן PII ידוע נמוך מסף שניתן להגדרה. |  2  |  D/V  |
| 8.2.4 | יש לוודא כי יעילות הסינון (למשל, מדד הכיסוי של הסרת PII, סחף סמנטי) מאומתת לפחות כל חצי שנה מול קורפוסים סטנדרטיים.                            |  2  |   V   |
| 8.2.5 | ודא שההגדרות לניקוי נתונים תחת בקרת גרסאות וכי השינויים עוברים סקירת עמיתים.                                                                   |  3  |  D/V  |

---

## C8.3 תפוגת זיכרון, ביטול ומחיקה

GDPR "זכות השכחה" וחוקים דומים דורשים מחיקה מהירה; לכן מאגרי וקטורים חייבים לתמוך TTLים, מחיקות קשות וטומב-סטונינג כך שלא ניתן יהיה לשחזר וקטורים שנשללו ולאינדקסם מחדש.

|   #   | תיאור                                                                                                            | רמה | תפקיד |
| :---: | ---------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 8.3.1 | ודא שכל וקטור וכל רשומת נתוני מטא כוללים TTL או תווית שמירה מפורשת שמאושרת על ידי משימות ניקוי אוטומטיות.        |  1  |  D/V  |
| 8.3.2 | ודא שבקשות מחיקה שמפעיל המשתמש מסלקות וקטורים, מטא-נתונים, עותקי מטמון ואינדקסים נגזרים בתוך 30 ימים.            |  1  |  D/V  |
| 8.3.3 | ודא כי מחיקות לוגיות מלוות בהשמדה קריפטוגרפית של בלוקי האחסון אם החומרה תומכת בכך, או בהשמדת מפתח במאגר המפתחות. |  2  |   D   |
| 8.3.4 | ודא כי הוקטורים שפגו תוקפם אינם נכללים מתוצאות חיפוש השכן הקרוב ביותר בתוך < 500 ms לאחר שפגו תוקפם.             |  3  |  D/V  |

---

## C8.4 מניעת הטמעת היפוך ודליפה

ההגנות האחרונות—הצטברות רעש, projection networks, privacy-neuron perturbation, והצפנת שכבת היישום—יכולות להפחית את שיעורי ההיפוך ברמת טוקן מתחת ל-5%.

|   #   | תיאור                                                                                                                  | רמה | תפקיד |
| :---: | ---------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 8.4.1 | ודא שקיים מודל איומים פורמלי המכסה התקפות היפוך, התקפות זיהוי חברות והסקת מאפיינים, ושנבדק מדי שנה.                    |  1  |   V   |
| 8.4.2 | ודא כי הצפנת שכבת היישום או הצפנה הניתנת לחיפוש מגינה על וקטורים מפני קריאות ישירות על ידי מנהלי תשתיות או צוותי ענן.  |  2  |  D/V  |
| 8.4.3 | ודא כי פרמטרי ההגנה (ε עבור DP, רעש σ, מדרגת ההקרנה k) מאוזנים כך שפרטיות ≥ 99% והגנת אסימונים ותועלת ≤ 3% אובדן דיוק. |  3  |   V   |
| 8.4.4 | ודא שמדדי העמידות נגד היפוך-מודל מהווים חלק משערי שחרור לעדכוני מודל, עם תקציבי רגרסיה מוגדרים.                        |  3  |  D/V  |

---

## C8.5 אכיפת היקף עבור זיכרון ייעודי למשתמש

דליפת נתונים בין-לקוחות עדיין מהווה את הסיכון המרכזי בתחום RAG: שאילתות דמיון שאינן מסוננות כראוי עלולות לחשוף מסמכים פרטיים של לקוח אחר.

|   #   | תיאור                                                                                                       | רמה | תפקיד |
| :---: | ----------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 8.5.1 | ודא שכל שאילתת השליפה מסוננת לאחר סינון לפי מזהה טננט/משתמש לפני שהיא מועברת לפרומפט של LLM.                |  1  |  D/V  |
| 8.5.2 | ודא שמות האוספים או מזהי מרחב שמות ממולחים לפי משתמש או לפי דייר, כדי שווקטורים לא יתנגשו בין היקפים שונים. |  1  |   D   |
| 8.5.3 | ודא כי תוצאות הדמיון העולות מעל סף מרחק שניתן להגדיר אך הן מחוץ להיקף הקורא נדחות ומפעילות התראות אבטחה.    |  2  |  D/V  |
| 8.5.4 | ודא שבדיקות עומס מרובת-שוכרים מדמות שאילתות עוינות שמנסות לאתר מסמכים שאינם בתחום, ומראות שאין דליפה.       |  2  |   V   |
| 8.5.5 | ודא שמפתחות ההצפנה מופרדים לפי טננט, מה שמבטיח בידוד קריפטוגרפי גם אם האחסון הפיזי משותף.                   |  3  |  D/V  |

---

## C8.6 אבטחת מערכת זיכרון מתקדמת

בקרות אבטחה עבור ארכיטקטורות זיכרון מתוחכמות הכוללות זיכרון אפיזודי, זיכרון סמנטי וזיכרון עבודה, עם דרישות בידוד ואימות ספציפיות.

|   #   | תיאור                                                                                                                                                                                          | רמה | תפקיד |
| :---: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-: | :---: |
| 8.6.1 | ודא שסוגי זיכרון שונים (זיכרון אפיזודי, זיכרון סמנטי, זיכרון עבודה) כוללים הקשרים אבטחתיים מבודדים עם בקרות גישה על בסיס תפקידים, מפתחות הצפנה נפרדים, ודפוסי גישה מתועדים עבור כל סוג זיכרון. |  1  |  D/V  |
| 8.6.2 | ודא כי תהליכי גיבוש זיכרונות כולל אימות אבטחה כדי למנוע הזרקת זיכרונות זדוניים באמצעות ניקוי תוכן, אימות מקור ובדיקות שלמות לפני האחסון.                                                       |  2  |  D/V  |
| 8.6.3 | ודא ששאילתות לאחזור מידע מהזיכרון מאומתות ומנוקות כדי למנוע הוצאה של מידע שאינו מורשה לגישה באמצעות ניתוח דפוסי שאילתות, אכיפת בקרת גישה וסינון תוצאות.                                        |  2  |  D/V  |
| 8.6.4 | ודא שמנגנוני מחיקת זיכרון מוחקים בצורה מאובטחת מידע רגיש עם ערבויות מחיקה קריפטוגרפית באמצעות מחיקת מפתחות, כתיבה מחדש במספר מעברים, או מחיקה מאובטחת מבוססת חומרה עם תעודות אימות.            |  3  |  D/V  |
| 8.6.5 | ודא ששלמות מערכת הזיכרון מנוטרת באופן מתמשך לשינויים בלתי מורשים או להשחתה, באמצעות סכומי אימות, יומני ביקורת והודעות אוטומטיות כאשר תוכן הזיכרון משתנה מחוץ לפעילות התקינה.                   |  3  |  D/V  |

---

## הפניות

* [Vector database security: Pinecone – IronCore Labs](https://ironcorelabs.com/vectordbs/pinecone-security/)
* [Securing the Backbone of AI: Safeguarding Vector Databases and Embeddings – Privacera](https://privacera.com/blog/securing-the-backbone-of-ai-safeguarding-vector-databases-and-embeddings/)
* [Enhancing Data Security with RBAC of Qdrant Vector Database – AI Advances](https://ai.gopubby.com/enhancing-data-security-with-role-based-access-control-of-qdrant-vector-database-3878769bec83)
* [Mitigating Privacy Risks in LLM Embeddings from Embedding Inversion – arXiv](https://arxiv.org/html/2411.05034v1)
* [DPPN: Detecting and Perturbing Privacy-Sensitive Neurons – OpenReview](https://openreview.net/forum?id=DF5TVzpTW0)
* [Art. 17 GDPR – Right to Erasure](https://gdpr-info.eu/art-17-gdpr/)
* [Sensitive Data in Text Embeddings Is Recoverable – Tonic.ai](https://www.tonic.ai/blog/sensitive-data-in-text-embeddings-is-recoverable)
* [PII Identification and Removal – NVIDIA NeMo Docs](https://docs.nvidia.com/nemo-framework/user-guide/latest/datacuration/personalidentifiableinformationidentificationandremoval.html)
* [De-identifying Sensitive Data – Google Cloud DLP](https://cloud.google.com/sensitive-data-protection/docs/deidentify-sensitive-data)
* [Remove PII from Conversations Using Sensitive Information Filters – AWS Bedrock Guardrails](https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails-sensitive-filters.html)
* [Think Your RAG Is Secure? Think Again – Medium](https://medium.com/%40vijay.poudel1/think-your-rag-is-secure-think-again-heres-how-to-actually-lock-it-down-c4c30e3864e7)
* [Design a Secure Multitenant RAG Inferencing Solution – Microsoft Learn](https://learn.microsoft.com/en-us/azure/architecture/ai-ml/guide/secure-multitenant-rag)
* [Best Practices for Multi-Tenancy RAG with Milvus – Milvus Blog](https://milvus.io/blog/build-multi-tenancy-rag-with-milvus-best-practices-part-one.md)

